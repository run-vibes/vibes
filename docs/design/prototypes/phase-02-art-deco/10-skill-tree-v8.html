<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Knowledge Universe â€” Outward/Inward</title>
  <link rel="stylesheet" href="shared.css">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       THE KNOWLEDGE UNIVERSE â€” Outward/Inward Metaphor

       "Looking outward = who you know. Looking inward = what you know."

       SPACE THEME (Outward): Your solar system with social orbits
         - Your Sun = You (your knowledge mass)
         - Orbiting Bodies = People (teams, friends, mentors, peers, AI)
         - Distant Galaxies = Institutions (corps, universities, governments)

       HEXAGONAL THEME (Inward): Your knowledge structure
         - Zoom INTO your sun to enter your mind
         - Hexagonal grid = Knowledge domains
         - Atomic/Subatomic = Concepts, syntax, edge cases
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    :root {
      --spotlight-x: 50%;
      --spotlight-y: 50%;
      --spotlight-radius: 400px;
      --spotlight-intensity: 0;
      --blur-intensity: 0;

      /* Layer opacities â€” controlled by JS for smooth transitions */
      --universe-opacity: 1;
      --solar-system-opacity: 1;

      /* Knowledge core (inside the sun) */
      --knowledge-core-opacity: 0;
      --hex-grid-opacity: 0;
      --hex-detail-opacity: 0;
      --atomic-opacity: 0;
      --subatomic-opacity: 0;

      /* Social orbit colors */
      --user-mentor: #3d8b8b;
      --user-peer: #8b5a8b;
      --user-team: #d4a84b;
      --user-ai: #c45a5a;
      --user-friend: #5a8b5a;
      --user-family: #8b6b3d;

      /* Distant galaxy entity colors */
      --entity-corp: #4a90d9;      /* Corporate blue */
      --entity-university: #e8a840; /* Academic gold */
      --entity-government: #a0b0c0; /* Neutral gray-blue */
      --entity-influencer: #c86dd7; /* Vibrant magenta */
      --entity-nonprofit: #5dc97a;  /* Green for good */

      /* Knowledge core colors */
      --hex-primary: #d4a84b;
      --hex-secondary: #3d8b8b;
      --hex-tertiary: #8b5a8b;
    }

    body {
      overflow: hidden;
      height: 100vh;
    }

    .zoom-viewport {
      position: fixed;
      inset: 0;
      background: var(--bg-void);
      overflow: hidden;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STAR FIELD â€” Deep space background with parallax drift
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .star-field {
      position: absolute;
      inset: -100px;
      pointer-events: none;
      z-index: 0;
      opacity: calc(var(--universe-opacity) * 0.8 + 0.2);
      transition: opacity 0.6s ease;
    }

    .star-layer {
      position: absolute;
      inset: 0;
    }

    .star-layer-1 {
      background-image:
        radial-gradient(1px 1px at 10% 20%, rgba(255, 255, 255, 0.8) 50%, transparent 50%),
        radial-gradient(1px 1px at 30% 70%, rgba(255, 255, 255, 0.6) 50%, transparent 50%),
        radial-gradient(1px 1px at 50% 40%, rgba(255, 255, 255, 0.7) 50%, transparent 50%),
        radial-gradient(1px 1px at 70% 85%, rgba(255, 255, 255, 0.5) 50%, transparent 50%),
        radial-gradient(1px 1px at 90% 30%, rgba(255, 255, 255, 0.8) 50%, transparent 50%),
        radial-gradient(1px 1px at 15% 55%, rgba(212, 168, 75, 0.4) 50%, transparent 50%),
        radial-gradient(1px 1px at 85% 65%, rgba(61, 139, 139, 0.4) 50%, transparent 50%);
      animation: star-drift-1 120s linear infinite;
    }

    .star-layer-2 {
      background-image:
        radial-gradient(1.5px 1.5px at 25% 35%, rgba(255, 255, 255, 0.5) 50%, transparent 50%),
        radial-gradient(1.5px 1.5px at 55% 15%, rgba(255, 255, 255, 0.4) 50%, transparent 50%),
        radial-gradient(1.5px 1.5px at 75% 55%, rgba(255, 255, 255, 0.5) 50%, transparent 50%),
        radial-gradient(1.5px 1.5px at 5% 85%, rgba(255, 255, 255, 0.4) 50%, transparent 50%),
        radial-gradient(2px 2px at 45% 95%, rgba(212, 168, 75, 0.3) 50%, transparent 50%);
      animation: star-drift-2 180s linear infinite;
    }

    .star-layer-3 {
      background-image:
        radial-gradient(2px 2px at 20% 80%, rgba(255, 255, 255, 0.3) 50%, transparent 50%),
        radial-gradient(2px 2px at 60% 25%, rgba(255, 255, 255, 0.25) 50%, transparent 50%),
        radial-gradient(2px 2px at 80% 75%, rgba(255, 255, 255, 0.3) 50%, transparent 50%);
      animation: star-drift-3 240s linear infinite;
    }

    @keyframes star-drift-1 {
      from { transform: translate(0, 0); }
      to { transform: translate(-20px, 10px); }
    }

    @keyframes star-drift-2 {
      from { transform: translate(0, 0); }
      to { transform: translate(15px, -8px); }
    }

    @keyframes star-drift-3 {
      from { transform: translate(0, 0); }
      to { transform: translate(-10px, -15px); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DISTANT GALAXIES â€” External knowledge masses (corporations, universities, etc.)
       These are entire GALAXIES of knowledge, not mere stars.
       They appear as spiral/elliptical shapes at the edges of observable space.
       Travel to them requires special achievements (contributions, employment, etc.)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .distant-galaxies {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 6000px;
      height: 6000px;
      pointer-events: none;
      z-index: 2;
      opacity: calc(var(--universe-opacity) * 0.9 + 0.1);
      transition: opacity 0.6s ease;
    }

    /* === GALACTIC ZONES â€” Visual hierarchy of knowledge space === */
    .galactic-zones {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .galactic-zone {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      pointer-events: none;
    }

    /* Your Solar System â€” innermost zone */
    .zone-solar-system {
      width: 800px;
      height: 800px;
      border: 1px solid rgba(212, 168, 75, 0.12);
      background: radial-gradient(circle,
        rgba(212, 168, 75, 0.04) 0%,
        rgba(212, 168, 75, 0.01) 70%,
        transparent 100%
      );
    }

    .zone-solar-system::after {
      content: 'YOUR SOLAR SYSTEM';
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-condensed);
      font-size: 8px;
      letter-spacing: 0.15em;
      color: rgba(212, 168, 75, 0.3);
      white-space: nowrap;
    }

    /* Your Galaxy â€” the broader zone containing nearby stars */
    .zone-your-galaxy {
      width: 1600px;
      height: 1600px;
      border: 1px dashed rgba(212, 168, 75, 0.08);
    }

    .zone-your-galaxy::after {
      content: 'YOUR GALAXY';
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-condensed);
      font-size: 8px;
      letter-spacing: 0.15em;
      color: rgba(212, 168, 75, 0.2);
      white-space: nowrap;
    }

    /* Local Cluster â€” nearby galaxies, reachable with effort */
    .zone-local-cluster {
      width: 2800px;
      height: 2800px;
      border: 1px dashed rgba(255, 255, 255, 0.06);
    }

    .zone-local-cluster::after {
      content: 'LOCAL CLUSTER';
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-condensed);
      font-size: 8px;
      letter-spacing: 0.15em;
      color: rgba(255, 255, 255, 0.12);
      white-space: nowrap;
    }

    /* Deep Space â€” distant galaxies, legendary achievements required */
    .zone-deep-space {
      width: 4500px;
      height: 4500px;
      border: 1px dashed rgba(255, 255, 255, 0.03);
    }

    .zone-deep-space::after {
      content: 'DEEP SPACE';
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-condensed);
      font-size: 8px;
      letter-spacing: 0.15em;
      color: rgba(255, 255, 255, 0.08);
      white-space: nowrap;
    }

    /* === DISTANT GALAXY â€” Individual knowledge galaxy === */
    .distant-galaxy {
      position: absolute;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 0.5s ease, filter 0.5s ease, opacity 0.4s ease;
      opacity: 0.7;
    }

    .distant-galaxy:hover {
      opacity: 1;
      transform: scale(1.4);
      z-index: 50;
    }

    /* Galaxy core â€” bright center */
    .galaxy-core {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 35%;
      height: 35%;
      border-radius: 50%;
      filter: blur(1px);
    }

    /* Galaxy disk â€” spiral or elliptical shape */
    .galaxy-disk {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      opacity: 0.7;
    }

    /* Spiral galaxy animation */
    @keyframes galaxy-rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Galaxy halo â€” outer glow */
    .galaxy-halo {
      position: absolute;
      inset: -40%;
      border-radius: 50%;
      opacity: 0.4;
      filter: blur(6px);
    }

    /* Travel portal â€” locked by default, shows potential connection */
    .travel-portal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 130%;
      height: 130%;
      border-radius: 50%;
      border: 1px dashed rgba(255, 255, 255, 0.08);
      opacity: 0;
      transition: opacity 0.4s ease, border-color 0.4s ease;
    }

    .distant-galaxy:hover .travel-portal {
      opacity: 1;
    }

    .travel-portal::after {
      content: 'ğŸ”’';
      position: absolute;
      bottom: -18px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 9px;
      opacity: 0.6;
    }

    /* Unlocked travel â€” for galaxies you can visit */
    .distant-galaxy.unlocked .travel-portal {
      border-color: rgba(212, 168, 75, 0.25);
    }

    .distant-galaxy.unlocked .travel-portal::after {
      content: 'âŸ¡';
      color: var(--gold);
      opacity: 0.9;
      font-size: 12px;
    }

    /* Tooltip for galaxy hover */
    .galaxy-label {
      position: absolute;
      bottom: calc(100% + 12px);
      left: 50%;
      transform: translateX(-50%) scale(0.85);
      font-family: var(--font-condensed);
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      white-space: nowrap;
      padding: 5px 10px;
      background: rgba(15, 15, 18, 0.9);
      border: 1px solid var(--border-subtle);
      color: var(--text-primary);
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
      z-index: 200;
    }

    .galaxy-label .galaxy-type {
      display: block;
      font-size: 7px;
      font-weight: 400;
      color: var(--text-muted);
      margin-top: 2px;
      letter-spacing: 0.08em;
    }

    .distant-galaxy:hover .galaxy-label {
      transform: translateX(-50%) scale(1);
      opacity: 1;
    }

    /* === GALAXY TYPES â€” Visual treatments by entity category === */

    /* CORPORATIONS â€” Blue spiral galaxies (organized, structured knowledge) */
    .distant-galaxy.corporation .galaxy-core {
      background: radial-gradient(circle,
        rgba(74, 144, 217, 1) 0%,
        rgba(74, 144, 217, 0.5) 60%,
        transparent 100%
      );
      box-shadow: 0 0 12px rgba(74, 144, 217, 0.6);
    }

    .distant-galaxy.corporation .galaxy-disk {
      background: conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(74, 144, 217, 0.35) 25deg,
        transparent 50deg,
        rgba(74, 144, 217, 0.28) 80deg,
        transparent 105deg,
        rgba(74, 144, 217, 0.22) 135deg,
        transparent 160deg,
        rgba(74, 144, 217, 0.35) 185deg,
        transparent 210deg,
        rgba(74, 144, 217, 0.28) 240deg,
        transparent 265deg,
        rgba(74, 144, 217, 0.22) 295deg,
        transparent 320deg,
        rgba(74, 144, 217, 0.3) 345deg,
        transparent 360deg
      );
      animation: galaxy-rotate 80s linear infinite;
    }

    .distant-galaxy.corporation .galaxy-halo {
      background: radial-gradient(circle, rgba(74, 144, 217, 0.2) 0%, transparent 65%);
    }

    .distant-galaxy.corporation:hover .galaxy-core {
      box-shadow: 0 0 20px rgba(74, 144, 217, 0.8), 0 0 40px rgba(74, 144, 217, 0.4);
    }

    /* UNIVERSITIES â€” Amber elliptical galaxies (ancient, established knowledge) */
    .distant-galaxy.university .galaxy-core {
      background: radial-gradient(circle,
        rgba(232, 168, 64, 1) 0%,
        rgba(232, 168, 64, 0.5) 60%,
        transparent 100%
      );
      box-shadow: 0 0 10px rgba(232, 168, 64, 0.6);
    }

    .distant-galaxy.university .galaxy-disk {
      background: radial-gradient(ellipse 100% 55% at center,
        rgba(232, 168, 64, 0.3) 0%,
        rgba(232, 168, 64, 0.12) 50%,
        transparent 100%
      );
      transform: rotate(-25deg);
    }

    .distant-galaxy.university .galaxy-halo {
      background: radial-gradient(circle, rgba(232, 168, 64, 0.18) 0%, transparent 65%);
    }

    .distant-galaxy.university:hover .galaxy-core {
      box-shadow: 0 0 18px rgba(232, 168, 64, 0.75), 0 0 35px rgba(232, 168, 64, 0.35);
    }

    /* GOVERNMENTS â€” Gray-blue irregular galaxies (vast, distributed knowledge) */
    .distant-galaxy.government .galaxy-core {
      background: radial-gradient(circle,
        rgba(160, 176, 192, 0.95) 0%,
        rgba(160, 176, 192, 0.45) 60%,
        transparent 100%
      );
      box-shadow: 0 0 10px rgba(160, 176, 192, 0.5);
    }

    .distant-galaxy.government .galaxy-disk {
      background:
        radial-gradient(ellipse 75% 100% at 35% 50%, rgba(160, 176, 192, 0.22) 0%, transparent 55%),
        radial-gradient(ellipse 100% 75% at 65% 50%, rgba(160, 176, 192, 0.18) 0%, transparent 55%);
    }

    .distant-galaxy.government .galaxy-halo {
      background: radial-gradient(circle, rgba(160, 176, 192, 0.15) 0%, transparent 65%);
    }

    .distant-galaxy.government:hover .galaxy-core {
      box-shadow: 0 0 16px rgba(160, 176, 192, 0.65), 0 0 32px rgba(160, 176, 192, 0.3);
    }

    /* INFLUENCERS â€” Magenta quasars (incredibly bright individual sources) */
    .distant-galaxy.influencer .galaxy-core {
      background: radial-gradient(circle,
        rgba(200, 109, 215, 1) 0%,
        rgba(200, 109, 215, 0.7) 35%,
        rgba(200, 109, 215, 0.3) 65%,
        transparent 100%
      );
      box-shadow: 0 0 14px rgba(200, 109, 215, 0.7);
    }

    .distant-galaxy.influencer .galaxy-disk {
      background: conic-gradient(
        from 0deg,
        rgba(200, 109, 215, 0.45) 0deg,
        transparent 12deg,
        rgba(200, 109, 215, 0.35) 85deg,
        transparent 97deg,
        rgba(200, 109, 215, 0.45) 175deg,
        transparent 187deg,
        rgba(200, 109, 215, 0.35) 265deg,
        transparent 277deg
      );
      animation: galaxy-rotate 40s linear infinite;
    }

    .distant-galaxy.influencer .galaxy-halo {
      background: radial-gradient(circle, rgba(200, 109, 215, 0.2) 0%, transparent 65%);
    }

    .distant-galaxy.influencer:hover .galaxy-core {
      box-shadow: 0 0 22px rgba(200, 109, 215, 0.85), 0 0 45px rgba(200, 109, 215, 0.45);
    }

    /* NONPROFITS â€” Green nebular clusters (diffuse, open knowledge) */
    .distant-galaxy.nonprofit .galaxy-core {
      background: radial-gradient(circle,
        rgba(93, 201, 122, 0.95) 0%,
        rgba(93, 201, 122, 0.45) 60%,
        transparent 100%
      );
      box-shadow: 0 0 10px rgba(93, 201, 122, 0.5);
    }

    .distant-galaxy.nonprofit .galaxy-disk {
      background:
        radial-gradient(circle at 28% 32%, rgba(93, 201, 122, 0.25) 0%, transparent 45%),
        radial-gradient(circle at 72% 38%, rgba(93, 201, 122, 0.2) 0%, transparent 40%),
        radial-gradient(circle at 50% 72%, rgba(93, 201, 122, 0.22) 0%, transparent 45%);
    }

    .distant-galaxy.nonprofit .galaxy-halo {
      background: radial-gradient(circle, rgba(93, 201, 122, 0.15) 0%, transparent 65%);
    }

    .distant-galaxy.nonprofit:hover .galaxy-core {
      box-shadow: 0 0 16px rgba(93, 201, 122, 0.7), 0 0 32px rgba(93, 201, 122, 0.35);
    }

    /* === SIZE CLASSES â€” Based on knowledge mass/influence === */
    .distant-galaxy.massive { width: 90px; height: 90px; }
    .distant-galaxy.large { width: 70px; height: 70px; }
    .distant-galaxy.medium { width: 52px; height: 52px; }
    .distant-galaxy.small { width: 38px; height: 38px; }

    /* Influencers are more compact â€” bright individuals, not sprawling orgs */
    .distant-galaxy.influencer.massive { width: 55px; height: 55px; }
    .distant-galaxy.influencer.large { width: 45px; height: 45px; }
    .distant-galaxy.influencer.medium { width: 36px; height: 36px; }
    .distant-galaxy.influencer.small { width: 28px; height: 28px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NEBULA ATMOSPHERE â€” Cosmic color clouds
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .nebula {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      opacity: calc(var(--universe-opacity) * 0.5);
      transition: opacity 0.8s ease;
    }

    .nebula::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 80% 60% at 20% 30%, rgba(139, 90, 139, 0.06) 0%, transparent 50%),
        radial-gradient(ellipse 60% 80% at 80% 70%, rgba(61, 139, 139, 0.04) 0%, transparent 50%),
        radial-gradient(ellipse 50% 40% at 50% 50%, rgba(212, 168, 75, 0.03) 0%, transparent 40%);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SPOTLIGHT & BLUR â€” Focus effect at deeper zoom levels
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .spotlight-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 100;
      opacity: var(--spotlight-intensity);
      transition: opacity 0.8s ease;
    }

    .spotlight-layer::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle var(--spotlight-radius) at var(--spotlight-x) var(--spotlight-y),
        transparent 0%,
        transparent 70%,
        rgba(7, 9, 13, 0.2) 85%,
        rgba(7, 9, 13, 0.45) 95%,
        rgba(7, 9, 13, 0.65) 100%
      );
    }

    .spotlight-layer::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(
        circle calc(var(--spotlight-radius) + 30px) at var(--spotlight-x) var(--spotlight-y),
        transparent 0%,
        transparent 88%,
        rgba(212, 168, 75, 0.04) 94%,
        transparent 100%
      );
    }

    .blur-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 99;
      opacity: var(--blur-intensity);
      transition: opacity 0.8s ease;
      backdrop-filter: blur(2px);
      -webkit-backdrop-filter: blur(2px);
      mask-image: radial-gradient(
        circle var(--spotlight-radius) at var(--spotlight-x) var(--spotlight-y),
        transparent 0%,
        transparent 65%,
        black 90%,
        black 100%
      );
      -webkit-mask-image: radial-gradient(
        circle var(--spotlight-radius) at var(--spotlight-x) var(--spotlight-y),
        transparent 0%,
        transparent 65%,
        black 90%,
        black 100%
      );
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ZOOM CONTAINER â€” Infinite Canvas
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .zoom-container {
      position: absolute;
      width: 100%;
      height: 100%;
      transform-origin: center center;
      cursor: grab;
      z-index: 2;
    }

    .zoom-container.dragging {
      cursor: grabbing;
    }

    .zoom-container.animating {
      transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       KNOWLEDGE UNIVERSE â€” The infinite canvas containing all layers
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .knowledge-universe {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 3000px;
      height: 3000px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LEVEL 0: UNIVERSE VIEW â€” Multiplayer Overview
       Other users orbit around your knowledge center
       Distance = recency of interaction, Size = relative knowledge mass
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .universe-layer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 2400px;
      height: 2400px;
      opacity: var(--universe-opacity);
      pointer-events: auto;
      transition: opacity 0.5s ease;
      z-index: 5;
    }

    .universe-layer.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Your Knowledge Sun â€” The center of your universe */
    .knowledge-sun {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      cursor: pointer;
      z-index: 10;
    }

    .sun-core {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle,
        rgba(232, 196, 90, 0.9) 0%,
        rgba(212, 168, 75, 0.8) 30%,
        rgba(180, 140, 60, 0.6) 60%,
        rgba(150, 110, 40, 0.3) 80%,
        transparent 100%
      );
      border-radius: 50%;
      animation: sun-pulse 4s ease-in-out infinite;
    }

    @keyframes sun-pulse {
      0%, 100% {
        transform: scale(1);
        filter: brightness(1);
      }
      50% {
        transform: scale(1.05);
        filter: brightness(1.2);
      }
    }

    .sun-corona {
      position: absolute;
      inset: -40px;
      background: radial-gradient(circle,
        rgba(212, 168, 75, 0.15) 0%,
        rgba(212, 168, 75, 0.08) 40%,
        rgba(212, 168, 75, 0.02) 70%,
        transparent 100%
      );
      border-radius: 50%;
      animation: corona-flare 8s ease-in-out infinite;
    }

    @keyframes corona-flare {
      0%, 100% { transform: scale(1); opacity: 0.6; }
      50% { transform: scale(1.15); opacity: 1; }
    }

    .sun-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-family: var(--font-display);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--bg-void);
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      white-space: nowrap;
    }

    /* User orbit paths */
    .user-orbit-path {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      border: 1px dashed rgba(255, 255, 255, 0.08);
      pointer-events: none;
    }

    .user-orbit-path.orbit-1 { width: 300px; height: 300px; }
    .user-orbit-path.orbit-2 { width: 480px; height: 480px; }
    .user-orbit-path.orbit-3 { width: 700px; height: 700px; }
    .user-orbit-path.orbit-4 { width: 950px; height: 950px; }

    /* User bodies â€” Other people/entities in your knowledge universe */
    .user-orbit-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      pointer-events: none;
    }

    .user-orbit-ring.ring-1 { width: 300px; height: 300px; }
    .user-orbit-ring.ring-2 { width: 480px; height: 480px; }
    .user-orbit-ring.ring-3 { width: 700px; height: 700px; }
    .user-orbit-ring.ring-4 { width: 950px; height: 950px; }

    .user-body {
      position: absolute;
      border-radius: 50%;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .user-body::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      min-width: 40px;
      min-height: 40px;
      border-radius: 50%;
    }

    .user-body:hover {
      transform: scale(1.8) !important;
    }

    /* User type styling */
    .user-body.mentor {
      background: radial-gradient(circle, var(--user-mentor) 30%, rgba(61, 139, 139, 0.4) 70%, transparent 100%);
      box-shadow: 0 0 15px rgba(61, 139, 139, 0.5);
    }

    .user-body.peer {
      background: radial-gradient(circle, var(--user-peer) 30%, rgba(139, 90, 139, 0.4) 70%, transparent 100%);
      box-shadow: 0 0 12px rgba(139, 90, 139, 0.5);
    }

    .user-body.team {
      background: radial-gradient(circle, var(--user-team) 30%, rgba(212, 168, 75, 0.4) 70%, transparent 100%);
      box-shadow: 0 0 14px rgba(212, 168, 75, 0.5);
    }

    .user-body.ai {
      background: radial-gradient(circle, var(--user-ai) 30%, rgba(196, 90, 90, 0.4) 70%, transparent 100%);
      box-shadow: 0 0 10px rgba(196, 90, 90, 0.5);
      animation: ai-pulse 2s ease-in-out infinite;
    }

    @keyframes ai-pulse {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.3); }
    }

    .user-body.learner {
      background: radial-gradient(circle, var(--user-learner) 30%, rgba(90, 139, 90, 0.4) 70%, transparent 100%);
      box-shadow: 0 0 8px rgba(90, 139, 90, 0.4);
    }

    /* User tooltip */
    .user-body::after {
      content: attr(data-name);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) scale(0) rotate(var(--counter-rotate, 0deg));
      font-family: var(--font-condensed);
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      white-space: nowrap;
      padding: 5px 10px;
      background: var(--bg-card);
      border: 1px solid var(--border-medium);
      color: var(--text-primary);
      opacity: 0;
      transition: all 0.2s ease;
      pointer-events: none;
      z-index: 200;
    }

    .user-body:hover::after {
      transform: translateX(-50%) scale(1) rotate(var(--counter-rotate, 0deg));
      opacity: 1;
    }

    /* Gravitational connection lines */
    .gravity-line {
      position: absolute;
      top: 50%;
      left: 50%;
      height: 1px;
      transform-origin: left center;
      pointer-events: none;
      opacity: 0.15;
    }

    .gravity-line.strong {
      background: linear-gradient(90deg, var(--gold-primary), transparent);
      opacity: 0.3;
    }

    .gravity-line.medium {
      background: linear-gradient(90deg, var(--accent-teal), transparent);
      opacity: 0.2;
    }

    .gravity-line.weak {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.3), transparent);
      opacity: 0.1;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LEVEL 1: YOU VIEW â€” Your Knowledge as Central Hub
       The inner solar system of your knowledge
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .you-layer {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      z-index: 20;
    }

    .you-core {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--bg-elevated) 0%, var(--bg-card) 100%);
      border: 3px solid var(--gold-primary);
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: var(--glow-gold-bright), inset 0 0 50px rgba(212, 168, 75, 0.05);
      cursor: pointer;
      transition: all 0.4s ease;
      animation: you-pulse 4s ease-in-out infinite;
      z-index: 25;
    }

    @keyframes you-pulse {
      0%, 100% {
        box-shadow: var(--glow-gold-bright), inset 0 0 50px rgba(212, 168, 75, 0.05);
      }
      50% {
        box-shadow: 0 0 50px rgba(232, 196, 90, 0.4), 0 0 100px rgba(212, 168, 75, 0.2), inset 0 0 50px rgba(212, 168, 75, 0.08);
      }
    }

    .you-core:hover {
      animation-play-state: paused;
      transform: scale(1.08);
    }

    .you-label {
      font-family: var(--font-display);
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--gold-primary);
      text-align: center;
    }

    .you-stats {
      font-family: var(--font-condensed);
      font-size: 10px;
      color: var(--text-tertiary);
      margin-top: 4px;
    }

    /* Skill orbit rings around "You" */
    .skill-orbit-zone {
      position: absolute;
      inset: -160px;
      border-radius: 50%;
      pointer-events: auto;
      z-index: 1;
    }

    .skill-orbit-ring {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      z-index: 5;
    }

    .skill-orbit-ring.orbit-1 { inset: -35px; border: 1px solid rgba(212, 168, 75, 0.2); }
    .skill-orbit-ring.orbit-2 { inset: -65px; border: 1px solid rgba(61, 139, 139, 0.15); }
    .skill-orbit-ring.orbit-3 { inset: -100px; border: 1px dashed rgba(212, 168, 75, 0.1); }
    .skill-orbit-ring.orbit-4 { inset: -140px; border: 1px dotted rgba(255, 255, 255, 0.05); }

    /* Skill bodies orbiting "You" */
    .skill-body {
      position: absolute;
      border-radius: 50%;
      box-shadow: 0 0 8px currentColor;
      pointer-events: auto;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      z-index: 10;
    }

    .skill-body::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 32px;
      height: 32px;
      min-width: 32px;
      min-height: 32px;
      border-radius: 50%;
    }

    .skill-body:hover {
      transform: scale(2.5) !important;
      box-shadow: 0 0 16px currentColor, 0 0 24px currentColor;
    }

    .skill-orbit-ring:has(.skill-body:hover) {
      z-index: 50 !important;
    }

    .skill-body::after {
      content: attr(data-label);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) scale(0);
      font-family: var(--font-condensed);
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      white-space: nowrap;
      padding: 5px 10px;
      background: var(--bg-card);
      border: 1px solid var(--border-medium);
      color: var(--text-primary);
      opacity: 0;
      transition: all 0.2s ease;
      pointer-events: none;
      z-index: 200;
    }

    .skill-body:hover::after {
      transform: translateX(-50%) scale(0.4) rotate(var(--counter-rotate, 0deg));
      opacity: 1;
    }

    /* Skill body colors */
    .skill-orbit-ring.orbit-1 .skill-body {
      width: 12px; height: 12px;
      background: var(--gold-primary);
      color: rgba(212, 168, 75, 0.6);
    }

    .skill-orbit-ring.orbit-2 .skill-body {
      width: 10px; height: 10px;
      background: var(--accent-teal);
      color: rgba(61, 139, 139, 0.5);
    }

    .skill-orbit-ring.orbit-3 .skill-body {
      width: 8px; height: 8px;
      background: var(--gold-muted);
      color: rgba(212, 168, 75, 0.4);
    }

    .skill-orbit-ring.orbit-4 .skill-body {
      width: 6px; height: 6px;
      background: var(--accent-success);
      color: rgba(77, 168, 77, 0.4);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SUN TRANSITION ZONE â€” The threshold between space and mind

       As you zoom into the sun, you transition from:
       SPACE (outward, social) â†’ KNOWLEDGE (inward, personal)

       Visual sequence:
       1. Corona intensifies (scale 2-3)
       2. Plasma fills view (scale 3-4)
       3. Geometry crystallizes (scale 4-5)
       4. Knowledge realm fully visible (scale 5+)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .sun-transition {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 600px;
      height: 600px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 15;
      opacity: 0;
      transition: opacity 0.6s ease;
    }

    .sun-transition.active {
      opacity: 1;
    }

    /* Plasma effect â€” swirling golden energy */
    .sun-plasma {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background:
        radial-gradient(circle at 30% 30%, rgba(255, 200, 100, 0.8) 0%, transparent 40%),
        radial-gradient(circle at 70% 60%, rgba(255, 160, 60, 0.7) 0%, transparent 35%),
        radial-gradient(circle at 50% 80%, rgba(255, 180, 80, 0.6) 0%, transparent 45%),
        radial-gradient(circle, rgba(255, 220, 150, 1) 0%, rgba(255, 180, 80, 0.9) 30%, rgba(212, 130, 50, 0.6) 60%, transparent 100%);
      animation: plasma-swirl 8s ease-in-out infinite;
      filter: blur(2px);
    }

    @keyframes plasma-swirl {
      0%, 100% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(5deg) scale(1.02); }
    }

    /* Crystallization effect â€” geometry emerging from chaos */
    .sun-crystallize {
      position: absolute;
      inset: 10%;
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    .sun-transition.crystallizing .sun-crystallize {
      opacity: 1;
    }

    .sun-crystallize::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        repeating-conic-gradient(
          from 0deg at 50% 50%,
          transparent 0deg,
          rgba(61, 139, 139, 0.15) 30deg,
          transparent 60deg
        );
      animation: crystal-form 4s ease-in-out infinite;
    }

    @keyframes crystal-form {
      0%, 100% { opacity: 0.3; transform: rotate(0deg); }
      50% { opacity: 0.8; transform: rotate(30deg); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       KNOWLEDGE CORE â€” The inner realm of your mind

       A completely different aesthetic from space:
       - Geometric, crystalline, precise
       - Cool colors (teal, purple) vs warm space (gold, orange)
       - Hexagonal tessellation representing interconnected knowledge
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .knowledge-core {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 4000px;
      height: 4000px;
      opacity: var(--knowledge-core-opacity);
      pointer-events: none;
      transition: opacity 0.6s ease;
      z-index: 20;
    }

    .knowledge-core.visible {
      pointer-events: auto;
    }

    /* Knowledge realm background â€” subtle geometric pattern */
    .knowledge-bg {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 50% 50%,
          rgba(20, 25, 30, 0.98) 0%,
          rgba(15, 18, 22, 1) 50%,
          rgba(10, 12, 15, 1) 100%
        );
    }

    .knowledge-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        repeating-linear-gradient(
          60deg,
          transparent 0px,
          transparent 40px,
          rgba(61, 139, 139, 0.02) 40px,
          rgba(61, 139, 139, 0.02) 41px
        ),
        repeating-linear-gradient(
          -60deg,
          transparent 0px,
          transparent 40px,
          rgba(139, 90, 139, 0.02) 40px,
          rgba(139, 90, 139, 0.02) 41px
        ),
        repeating-linear-gradient(
          0deg,
          transparent 0px,
          transparent 40px,
          rgba(212, 168, 75, 0.015) 40px,
          rgba(212, 168, 75, 0.015) 41px
        );
      opacity: 0.5;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEXAGONAL GRID â€” Knowledge compass (discovered + seeking)
       A tessellated map of your knowledge domains
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .hex-grid {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 600px;
      height: 600px;
      transform: translate(-50%, -50%);
      opacity: var(--hex-grid-opacity);
      transition: opacity 0.5s ease;
      pointer-events: none;
    }

    .hex-grid.visible {
      pointer-events: auto;
    }

    /* Individual hexagon cell â€” positioned in tessellation pattern */
    .hex-cell {
      position: absolute;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .hex-frame {
      position: relative;
      width: 100px;
      height: 115px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(30, 35, 42, 0.95) 0%, rgba(20, 25, 30, 0.9) 100%);
      border: 2px solid var(--gold-dim);
      transition: all 0.3s ease;
      /* True hexagon clip-path */
      clip-path: polygon(
        50% 0%, 100% 25%, 100% 75%,
        50% 100%, 0% 75%, 0% 25%
      );
    }

    /* Art Deco geometric accent lines */
    .hex-frame::before {
      content: '';
      position: absolute;
      inset: 6px;
      background: transparent;
      border: 1px solid rgba(212, 168, 75, 0.15);
      clip-path: inherit;
      pointer-events: none;
    }

    /* Inner geometric pattern */
    .hex-frame::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 30px;
      height: 30px;
      transform: translate(-50%, -50%) rotate(30deg);
      border: 1px solid rgba(212, 168, 75, 0.1);
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      pointer-events: none;
    }

    .hex-cell:hover .hex-frame {
      border-color: var(--gold-primary);
      background: linear-gradient(135deg, rgba(40, 48, 58, 0.95) 0%, rgba(30, 35, 42, 0.9) 100%);
      box-shadow:
        0 0 25px rgba(212, 168, 75, 0.2),
        inset 0 0 30px rgba(212, 168, 75, 0.05);
      transform: scale(1.1);
    }

    .hex-cell:hover .hex-frame::before {
      border-color: rgba(212, 168, 75, 0.3);
    }

    .hex-icon {
      font-size: 26px;
      margin-bottom: var(--space-1);
      color: var(--gold-muted);
    }

    .hex-label {
      font-family: var(--font-display);
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--text-primary);
      text-align: center;
    }

    .hex-meta {
      font-family: var(--font-condensed);
      font-size: 8px;
      color: var(--text-tertiary);
      margin-top: 2px;
    }

    /* Hexagon state variants */
    .hex-cell.mastered .hex-frame {
      border-color: var(--gold-primary);
      box-shadow: 0 0 20px rgba(212, 168, 75, 0.15);
    }
    .hex-cell.mastered .hex-icon {
      color: var(--gold-primary);
    }

    .hex-cell.learning .hex-frame {
      border-color: var(--accent-teal);
    }
    .hex-cell.learning .hex-icon {
      color: var(--accent-teal);
    }

    .hex-cell.frontier .hex-frame {
      border-color: var(--accent-purple);
      border-style: dashed;
      opacity: 0.7;
    }
    .hex-cell.frontier .hex-icon {
      color: var(--accent-purple);
      opacity: 0.6;
    }

    /* Emerging animation for hex grid */
    .hex-grid.emerging .hex-cell {
      animation: hex-emerge 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    .hex-grid.emerging .hex-cell:nth-child(1) { animation-delay: 0s; }
    .hex-grid.emerging .hex-cell:nth-child(2) { animation-delay: 0.08s; }
    .hex-grid.emerging .hex-cell:nth-child(3) { animation-delay: 0.16s; }
    .hex-grid.emerging .hex-cell:nth-child(4) { animation-delay: 0.24s; }
    .hex-grid.emerging .hex-cell:nth-child(5) { animation-delay: 0.32s; }
    .hex-grid.emerging .hex-cell:nth-child(6) { animation-delay: 0.40s; }
    .hex-grid.emerging .hex-cell:nth-child(7) { animation-delay: 0.48s; }

    @keyframes hex-emerge {
      0% {
        opacity: 0;
        transform: scale(0.5) rotate(-30deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEX DETAIL â€” Sub-domains and skills (smaller hexagons)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .hex-detail {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 500px;
      height: 500px;
      transform: translate(-50%, -50%);
      opacity: var(--hex-detail-opacity);
      pointer-events: none;
      transition: opacity 0.4s ease;
    }

    .hex-detail.visible {
      pointer-events: auto;
    }

    /* Smaller hexagons for skills */
    .hex-detail-cell {
      position: absolute;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .hex-detail-frame {
      width: 55px;
      height: 64px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(25, 30, 38, 0.95);
      border: 1px solid var(--gold-dim);
      clip-path: polygon(
        50% 0%, 100% 25%, 100% 75%,
        50% 100%, 0% 75%, 0% 25%
      );
      transition: all 0.25s ease;
      font-family: var(--font-display);
      font-size: 13px;
      font-weight: 600;
      color: var(--gold-muted);
    }

    .hex-detail-cell:hover .hex-detail-frame {
      border-color: var(--gold-primary);
      background: rgba(35, 42, 52, 0.95);
      transform: scale(1.2);
      box-shadow: 0 0 15px rgba(212, 168, 75, 0.25);
    }

    .hex-detail-label {
      font-family: var(--font-condensed);
      font-size: 8px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 2px;
    }

    .hex-detail-cell.mastered .hex-detail-frame {
      border-color: var(--gold-primary);
      color: var(--gold-primary);
    }

    .hex-detail-cell.learning .hex-detail-frame {
      border-color: var(--accent-teal);
      color: var(--accent-teal);
    }

    /* Emerging animation */
    .hex-detail.emerging .hex-detail-cell {
      animation: hex-emerge 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    .hex-detail.emerging .hex-detail-cell:nth-child(1) { animation-delay: 0s; }
    .hex-detail.emerging .hex-detail-cell:nth-child(2) { animation-delay: 0.06s; }
    .hex-detail.emerging .hex-detail-cell:nth-child(3) { animation-delay: 0.12s; }
    .hex-detail.emerging .hex-detail-cell:nth-child(4) { animation-delay: 0.18s; }
    .hex-detail.emerging .hex-detail-cell:nth-child(5) { animation-delay: 0.24s; }
    .hex-detail.emerging .hex-detail-cell:nth-child(6) { animation-delay: 0.30s; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ATOMIC LAYER â€” Historical recall (concepts, how we learned them)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .atomic-layer {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 400px;
      height: 400px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      opacity: var(--atomic-opacity);
      transition: opacity 0.4s ease;
    }

    .atomic-layer.visible {
      pointer-events: auto;
    }

    /* Concept nodes with labels */
    .atomic-cell {
      position: absolute;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .atomic-pip {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(20, 25, 30, 0.95);
      border: 1px solid var(--gold-dim);
      border-radius: 50%;
      font-family: var(--font-display);
      font-size: 12px;
      font-weight: 600;
      color: var(--gold-muted);
      transition: all 0.25s ease;
    }

    .atomic-cell:hover .atomic-pip {
      border-color: var(--gold-primary);
      transform: scale(1.3);
      box-shadow: 0 0 15px rgba(212, 168, 75, 0.3);
    }

    .atomic-label {
      font-family: var(--font-condensed);
      font-size: 7px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-tertiary);
      text-align: center;
      margin-top: 3px;
    }

    /* Emerging animation */
    .atomic-layer.emerging .atomic-cell {
      animation: concept-emerge 0.4s ease forwards;
    }
    .atomic-layer.emerging .atomic-cell:nth-child(1) { animation-delay: 0s; }
    .atomic-layer.emerging .atomic-cell:nth-child(2) { animation-delay: 0.05s; }
    .atomic-layer.emerging .atomic-cell:nth-child(3) { animation-delay: 0.1s; }
    .atomic-layer.emerging .atomic-cell:nth-child(4) { animation-delay: 0.15s; }
    .atomic-layer.emerging .atomic-cell:nth-child(5) { animation-delay: 0.2s; }

    @keyframes concept-emerge {
      0% { opacity: 0; transform: scale(0.5); }
      100% { opacity: 1; transform: scale(1); }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SUBATOMIC LAYER â€” Learning paths (syntax, edge cases, quirks)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    .subatomic-layer {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 350px;
      height: 350px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      opacity: var(--subatomic-opacity);
      transition: opacity 0.4s ease;
    }

    .subatomic-layer.visible {
      pointer-events: auto;
    }

    .subatomic-quark {
      position: absolute;
      width: 5px;
      height: 5px;
      background: radial-gradient(circle,
        rgba(139, 90, 139, 0.9) 0%,
        rgba(139, 90, 139, 0.3) 100%
      );
      border-radius: 50%;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 0.15s ease;
      box-shadow: 0 0 4px rgba(139, 90, 139, 0.4);
    }

    /* Quark flavors â€” different types of deep knowledge */
    .subatomic-quark.syntax {
      background: radial-gradient(circle, rgba(61, 139, 139, 0.9) 0%, rgba(61, 139, 139, 0.3) 100%);
      box-shadow: 0 0 4px rgba(61, 139, 139, 0.4);
    }

    .subatomic-quark.edge {
      background: radial-gradient(circle, rgba(196, 90, 90, 0.9) 0%, rgba(196, 90, 90, 0.3) 100%);
      box-shadow: 0 0 4px rgba(196, 90, 90, 0.4);
    }

    .subatomic-quark.quirk {
      background: radial-gradient(circle, rgba(212, 168, 75, 0.9) 0%, rgba(212, 168, 75, 0.3) 100%);
      box-shadow: 0 0 4px rgba(212, 168, 75, 0.4);
    }

    .subatomic-quark:hover {
      transform: scale(3);
    }

    .subatomic-quark:hover::after {
      content: attr(data-quark);
      position: absolute;
      bottom: calc(100% + 4px);
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-mono);
      font-size: 7px;
      color: var(--text-muted);
      white-space: nowrap;
      background: var(--bg-void);
      padding: 2px 5px;
      border: 1px solid var(--border-subtle);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ZOOM INDICATOR â€” 10 Levels
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .zoom-indicator {
      position: fixed;
      bottom: var(--space-6);
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: var(--space-4);
      padding: var(--space-3) var(--space-5);
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      z-index: 200;
    }

    .zoom-indicator::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold-primary), transparent);
    }

    .zoom-level-dots {
      display: flex;
      gap: 6px;
    }

    .zoom-dot {
      width: 6px;
      height: 6px;
      background: var(--bg-deep);
      border: 1px solid var(--border-medium);
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .zoom-dot.active {
      background: var(--gold-primary);
      border-color: var(--gold-primary);
      box-shadow: var(--glow-gold);
    }

    .zoom-dot:hover {
      border-color: var(--gold-muted);
    }

    .zoom-label {
      font-family: var(--font-condensed);
      font-size: 9px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--gold-muted);
      min-width: 80px;
      text-align: center;
    }

    .zoom-breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-family: var(--font-body);
      font-size: 10px;
      color: var(--text-tertiary);
    }

    .breadcrumb-item {
      color: var(--text-secondary);
      cursor: pointer;
      padding: 2px 5px;
      border-radius: 2px;
      transition: all 0.2s ease;
    }

    .breadcrumb-item:hover {
      color: var(--gold-primary);
      background: var(--gold-subtle);
    }

    .breadcrumb-item.current {
      color: var(--gold-primary);
      cursor: default;
    }

    .breadcrumb-sep {
      color: var(--gold-dim);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTROLS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .controls {
      position: fixed;
      top: var(--space-4);
      right: var(--space-4);
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
      z-index: 200;
    }

    .control-btn {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      color: var(--gold-muted);
      font-size: 18px;
      font-weight: 300;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .control-btn:hover {
      background: var(--bg-elevated);
      border-color: var(--gold-muted);
      color: var(--gold-primary);
    }

    .zoom-display {
      font-family: var(--font-condensed);
      font-size: 9px;
      text-align: center;
      color: var(--text-tertiary);
      padding: var(--space-2);
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      border-top: none;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LEGENDS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .legend {
      position: fixed;
      top: var(--space-4);
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: var(--space-4);
      padding: var(--space-2) var(--space-4);
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      z-index: 200;
    }

    .legend::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold-dim), transparent);
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-family: var(--font-condensed);
      font-size: 8px;
      letter-spacing: 0.05em;
      color: var(--text-tertiary);
      text-transform: uppercase;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .legend-dot.mentor { background: var(--user-mentor); }
    .legend-dot.peer { background: var(--user-peer); }
    .legend-dot.team { background: var(--user-team); }
    .legend-dot.ai { background: var(--user-ai); }
    .legend-dot.learner { background: var(--user-learner); }

    /* Distant galaxy entity legend dots */
    .legend-dot.corporation { background: var(--entity-corp); }
    .legend-dot.university { background: var(--entity-university); }
    .legend-dot.government { background: var(--entity-government); }
    .legend-dot.influencer { background: var(--entity-influencer); }
    .legend-dot.nonprofit { background: var(--entity-nonprofit); }

    /* Legend separator */
    .legend-separator {
      width: 1px;
      height: 20px;
      background: var(--border-light);
      margin: 0 var(--space-2);
    }

    /* Universe legend - only visible at universe zoom level */
    .universe-legend {
      opacity: var(--universe-opacity);
      transition: opacity 0.4s ease;
    }

    .universe-legend.hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="zoom-viewport">
    <!-- Star Field Background -->
    <div class="star-field">
      <div class="star-layer star-layer-1"></div>
      <div class="star-layer star-layer-2"></div>
      <div class="star-layer star-layer-3"></div>
    </div>

    <!-- Nebula Atmosphere -->
    <div class="nebula"></div>

    <!-- Spotlight and Blur Layers -->
    <div class="spotlight-layer" id="spotlight-layer"></div>
    <div class="blur-layer" id="blur-layer"></div>

    <!-- Zoom Container -->
    <div class="zoom-container" id="zoom-container">
      <div class="knowledge-universe" id="knowledge-universe">

        <!-- Galactic Zones â€” Visual hierarchy of knowledge space -->
        <div class="galactic-zones">
          <div class="galactic-zone zone-deep-space"></div>
          <div class="galactic-zone zone-local-cluster"></div>
          <div class="galactic-zone zone-your-galaxy"></div>
          <div class="galactic-zone zone-solar-system"></div>
        </div>

        <!-- Distant Galaxies â€” External knowledge masses (pan/zoom with universe) -->
        <div class="distant-galaxies" id="distant-galaxies">

          <!-- CORPORATIONS â€” Blue spiral galaxies in deep space -->
          <div class="distant-galaxy corporation massive" style="top: 8%; left: 10%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Google<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation massive" style="top: 10%; left: 88%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Microsoft<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation large" style="top: 6%; left: 42%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Apple<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation large" style="top: 92%; left: 72%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Meta<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation medium" style="top: 5%; left: 65%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Amazon<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation medium" style="top: 90%; left: 15%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Netflix<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation small" style="top: 22%; left: 5%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Stripe<span class="galaxy-type">Corporation</span></div>
          </div>

          <div class="distant-galaxy corporation small" style="top: 70%; left: 94%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Cloudflare<span class="galaxy-type">Corporation</span></div>
          </div>

          <!-- UNIVERSITIES â€” Amber elliptical galaxies -->
          <div class="distant-galaxy university large" style="top: 12%; left: 24%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">MIT<span class="galaxy-type">University</span></div>
          </div>

          <div class="distant-galaxy university large" style="top: 86%; left: 35%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Stanford<span class="galaxy-type">University</span></div>
          </div>

          <div class="distant-galaxy university medium" style="top: 18%; left: 92%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Berkeley<span class="galaxy-type">University</span></div>
          </div>

          <div class="distant-galaxy university medium" style="top: 76%; left: 8%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Cambridge<span class="galaxy-type">University</span></div>
          </div>

          <div class="distant-galaxy university small" style="top: 7%; left: 56%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">CMU<span class="galaxy-type">University</span></div>
          </div>

          <div class="distant-galaxy university small" style="top: 94%; left: 55%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Oxford<span class="galaxy-type">University</span></div>
          </div>

          <!-- GOVERNMENTS â€” Gray-blue irregular galaxies -->
          <div class="distant-galaxy government large" style="top: 10%; left: 6%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">NASA<span class="galaxy-type">Government</span></div>
          </div>

          <div class="distant-galaxy government medium" style="top: 91%; left: 92%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">NIH<span class="galaxy-type">Government</span></div>
          </div>

          <div class="distant-galaxy government medium" style="top: 5%; left: 35%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">CERN<span class="galaxy-type">Government</span></div>
          </div>

          <div class="distant-galaxy government small" style="top: 48%; left: 4%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">NIST<span class="galaxy-type">Government</span></div>
          </div>

          <div class="distant-galaxy government small" style="top: 45%; left: 95%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">ESA<span class="galaxy-type">Government</span></div>
          </div>

          <!-- INFLUENCERS â€” Magenta quasars (bright individual sources) -->
          <div class="distant-galaxy influencer medium" style="top: 16%; left: 78%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Andrej Karpathy<span class="galaxy-type">Influencer</span></div>
          </div>

          <div class="distant-galaxy influencer medium" style="top: 83%; left: 20%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Lex Fridman<span class="galaxy-type">Influencer</span></div>
          </div>

          <div class="distant-galaxy influencer small" style="top: 28%; left: 93%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">ThePrimeagen<span class="galaxy-type">Influencer</span></div>
          </div>

          <div class="distant-galaxy influencer small" style="top: 66%; left: 6%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Fireship<span class="galaxy-type">Influencer</span></div>
          </div>

          <div class="distant-galaxy influencer small" style="top: 9%; left: 75%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">3Blue1Brown<span class="galaxy-type">Influencer</span></div>
          </div>

          <!-- NONPROFITS â€” Green nebular clusters (diffuse, open knowledge) -->
          <div class="distant-galaxy nonprofit medium unlocked" style="top: 22%; left: 14%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Wikipedia<span class="galaxy-type">Nonprofit Â· Open</span></div>
          </div>

          <div class="distant-galaxy nonprofit medium unlocked" style="top: 78%; left: 80%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Khan Academy<span class="galaxy-type">Nonprofit Â· Open</span></div>
          </div>

          <div class="distant-galaxy nonprofit small unlocked" style="top: 34%; left: 7%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Mozilla<span class="galaxy-type">Nonprofit Â· Open</span></div>
          </div>

          <div class="distant-galaxy nonprofit small unlocked" style="top: 60%; left: 92%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Internet Archive<span class="galaxy-type">Nonprofit Â· Open</span></div>
          </div>

          <div class="distant-galaxy nonprofit small unlocked" style="top: 93%; left: 42%;">
            <div class="galaxy-halo"></div>
            <div class="galaxy-disk"></div>
            <div class="galaxy-core"></div>
            <div class="travel-portal"></div>
            <div class="galaxy-label">Linux Foundation<span class="galaxy-type">Nonprofit Â· Open</span></div>
          </div>
        </div>

        <!-- LEVEL 0: UNIVERSE â€” Multiplayer View -->
        <div class="universe-layer" id="universe-layer">
          <!-- User orbit paths (decorative) -->
          <div class="user-orbit-path orbit-1"></div>
          <div class="user-orbit-path orbit-2"></div>
          <div class="user-orbit-path orbit-3"></div>
          <div class="user-orbit-path orbit-4"></div>

          <!-- Knowledge Sun (You) -->
          <div class="knowledge-sun" id="knowledge-sun">
            <div class="sun-corona"></div>
            <div class="sun-core"></div>
            <span class="sun-label">Your Knowledge</span>
          </div>

          <!-- User Orbit Rings -->
          <div class="user-orbit-ring ring-1" id="user-orbit-1">
            <div class="user-body mentor" style="width: 28px; height: 28px; top: -14px; left: calc(50% - 14px);" data-name="Sarah Chen" data-type="mentor"></div>
          </div>

          <div class="user-orbit-ring ring-2" id="user-orbit-2">
            <div class="user-body ai" style="width: 22px; height: 22px; top: 50%; right: -11px; transform: translateY(-50%);" data-name="Claude" data-type="ai"></div>
            <div class="user-body peer" style="width: 18px; height: 18px; bottom: 10%; left: 15%;" data-name="Marcus Webb" data-type="peer"></div>
          </div>

          <div class="user-orbit-ring ring-3" id="user-orbit-3">
            <div class="user-body team" style="width: 24px; height: 24px; top: 20%; right: 10%;" data-name="Vibes Team" data-type="team"></div>
            <div class="user-body peer" style="width: 16px; height: 16px; bottom: 25%; left: 8%;" data-name="Alex Kim" data-type="peer"></div>
            <div class="user-body learner" style="width: 12px; height: 12px; top: 60%; right: 5%;" data-name="Jamie Li" data-type="learner"></div>
          </div>

          <div class="user-orbit-ring ring-4" id="user-orbit-4">
            <div class="user-body peer" style="width: 14px; height: 14px; top: 15%; left: 20%;" data-name="Robin Patel" data-type="peer"></div>
            <div class="user-body learner" style="width: 10px; height: 10px; bottom: 30%; right: 25%;" data-name="Casey Nguyen" data-type="learner"></div>
          </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SUN TRANSITION ZONE â€” The boundary between space and knowledge
             When zooming into the sun, this creates the visual shift from
             organic/cosmic to geometric/crystalline
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="sun-transition-zone" id="sun-transition-zone">
          <div class="plasma-swirl plasma-1"></div>
          <div class="plasma-swirl plasma-2"></div>
          <div class="plasma-swirl plasma-3"></div>
          <div class="crystallization-effect"></div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             KNOWLEDGE CORE â€” The inner realm (what you know)
             Geometric, crystalline, precise â€” distinct from the space theme
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="knowledge-core" id="knowledge-core">

          <!-- LEVEL 2: HEX GRID â€” Knowledge compass (tessellation pattern) -->
          <!-- Hex dimensions: 100x115px, spacing: 85px horiz, 88px vert -->
          <!-- Container: 600x600, centered at 300,300 -->
          <div class="hex-grid" id="hex-grid">
            <!-- Row 0: Center row -->
            <div class="hex-cell mastered" style="top: 243px; left: 250px;" data-domain="technology">
              <div class="hex-frame">
                <span class="hex-icon">&#x2699;</span>
                <span class="hex-label">Technology</span>
              </div>
            </div>
            <div class="hex-cell mastered" style="top: 243px; left: 160px;" data-domain="software">
              <div class="hex-frame">
                <span class="hex-icon">{}</span>
                <span class="hex-label">Software</span>
              </div>
            </div>
            <div class="hex-cell learning" style="top: 243px; left: 340px;" data-domain="ai">
              <div class="hex-frame">
                <span class="hex-icon">&#x2662;</span>
                <span class="hex-label">AI / ML</span>
              </div>
            </div>

            <!-- Row -1: Above center (offset by half) -->
            <div class="hex-cell mastered" style="top: 155px; left: 205px;" data-domain="finance">
              <div class="hex-frame">
                <span class="hex-icon">$</span>
                <span class="hex-label">Finance</span>
              </div>
            </div>
            <div class="hex-cell" style="top: 155px; left: 295px;" data-domain="derivatives">
              <div class="hex-frame">
                <span class="hex-icon">&#x0394;</span>
                <span class="hex-label">Derivatives</span>
              </div>
            </div>

            <!-- Row 1: Below center (offset by half) -->
            <div class="hex-cell frontier" style="top: 331px; left: 205px;" data-domain="science">
              <div class="hex-frame">
                <span class="hex-icon">&#x2697;</span>
                <span class="hex-label">Science</span>
              </div>
            </div>
            <div class="hex-cell frontier" style="top: 331px; left: 295px;" data-domain="health">
              <div class="hex-frame">
                <span class="hex-icon">&#x2764;</span>
                <span class="hex-label">Health</span>
              </div>
            </div>
          </div>

          <!-- LEVEL 3: HEX DETAILS â€” Specific skills (smaller hexagons) -->
          <!-- Container: 500x500, centered. Hex: 55x64px -->
          <div class="hex-detail" id="hex-detail">
            <!-- Languages cluster (around Software) -->
            <div class="hex-detail-cell mastered" style="top: 200px; left: 190px;" data-skill="rust">
              <div class="hex-detail-frame">Rs</div>
            </div>
            <div class="hex-detail-cell mastered" style="top: 200px; left: 250px;" data-skill="python">
              <div class="hex-detail-frame">Py</div>
            </div>
            <div class="hex-detail-cell learning" style="top: 252px; left: 220px;" data-skill="typescript">
              <div class="hex-detail-frame">Ts</div>
            </div>
            <div class="hex-detail-cell" style="top: 252px; left: 280px;" data-skill="go">
              <div class="hex-detail-frame">Go</div>
            </div>

            <!-- AI sub-skills cluster -->
            <div class="hex-detail-cell learning" style="top: 200px; left: 310px;" data-skill="llms">
              <div class="hex-detail-frame">LM</div>
            </div>
            <div class="hex-detail-cell" style="top: 252px; left: 340px;" data-skill="agents">
              <div class="hex-detail-frame">Ag</div>
            </div>
          </div>

          <!-- LEVEL 4: ATOMIC â€” Individual concepts, patterns -->
          <!-- Container: 400x400, centered. Pip: 32x32px -->
          <div class="atomic-layer" id="atomic-layer">
            <!-- Rust concepts arranged in a cluster pattern -->
            <!-- Row 0: Top two -->
            <div class="atomic-cell" style="top: 155px; left: 160px;" data-concept="ownership">
              <div class="atomic-pip">O</div>
              <span class="atomic-label">Ownership</span>
            </div>
            <div class="atomic-cell" style="top: 155px; left: 208px;" data-concept="borrowing">
              <div class="atomic-pip">B</div>
              <span class="atomic-label">Borrowing</span>
            </div>
            <!-- Row 1: Middle two (offset) -->
            <div class="atomic-cell" style="top: 195px; left: 140px;" data-concept="lifetimes">
              <div class="atomic-pip">L</div>
              <span class="atomic-label">Lifetimes</span>
            </div>
            <div class="atomic-cell" style="top: 195px; left: 228px;" data-concept="traits">
              <div class="atomic-pip">T</div>
              <span class="atomic-label">Traits</span>
            </div>
            <!-- Row 2: Bottom center -->
            <div class="atomic-cell" style="top: 235px; left: 184px;" data-concept="async">
              <div class="atomic-pip">A</div>
              <span class="atomic-label">Async</span>
            </div>
          </div>

          <!-- LEVEL 5: SUBATOMIC â€” Syntax, edge cases, implementation quirks -->
          <!-- Container: 350x350, centered. Quark: 16x16px -->
          <div class="subatomic-layer" id="subatomic-layer">
            <!-- Ownership subatomics (cluster around 140, 136) -->
            <div class="subatomic-quark syntax" style="top: 125px; left: 125px;" data-quark="move"></div>
            <div class="subatomic-quark syntax" style="top: 125px; left: 148px;" data-quark="Copy"></div>
            <div class="subatomic-quark edge" style="top: 148px; left: 136px;" data-quark="Drop"></div>
            <!-- Borrowing subatomics (cluster around 182, 136) -->
            <div class="subatomic-quark syntax" style="top: 125px; left: 172px;" data-quark="&T"></div>
            <div class="subatomic-quark syntax" style="top: 125px; left: 195px;" data-quark="&mut"></div>
            <div class="subatomic-quark edge" style="top: 148px; left: 178px;" data-quark="reborrow"></div>
            <div class="subatomic-quark quirk" style="top: 148px; left: 201px;" data-quark="NLL"></div>
            <!-- Lifetime subatomics (cluster around 122, 171) -->
            <div class="subatomic-quark syntax" style="top: 162px; left: 108px;" data-quark="'a"></div>
            <div class="subatomic-quark syntax" style="top: 162px; left: 131px;" data-quark="'static"></div>
            <div class="subatomic-quark edge" style="top: 185px; left: 114px;" data-quark="elision"></div>
            <div class="subatomic-quark quirk" style="top: 185px; left: 137px;" data-quark="HRTB"></div>
          </div>

        </div>

      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <button class="control-btn" id="zoom-in" title="Zoom In">+</button>
      <button class="control-btn" id="zoom-out" title="Zoom Out">-</button>
      <div class="zoom-display" id="zoom-display">100%</div>
      <button class="control-btn" id="reset-view" title="Reset View">&#x2302;</button>
    </div>

    <!-- Universe Legend (visible only at universe zoom) -->
    <div class="legend universe-legend" id="universe-legend">
      <!-- Personal orbit (close) -->
      <div class="legend-item">
        <span class="legend-dot mentor"></span>
        <span>Mentor</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot peer"></span>
        <span>Peer</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot team"></span>
        <span>Team</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot ai"></span>
        <span>AI</span>
      </div>

      <div class="legend-separator"></div>

      <!-- Distant Galaxies (external knowledge masses) -->
      <div class="legend-item">
        <span class="legend-dot corporation"></span>
        <span>Corp</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot university"></span>
        <span>Univ</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot government"></span>
        <span>Gov</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot influencer"></span>
        <span>Creator</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot nonprofit"></span>
        <span>Open</span>
      </div>
    </div>

    <!-- Zoom Indicator -->
    <div class="zoom-indicator">
      <div class="zoom-level-dots">
        <!-- SPACE REALM (outward) -->
        <div class="zoom-dot active" data-level="0" title="Universe" data-realm="space"></div>
        <div class="zoom-dot" data-level="1" title="Solar System" data-realm="space"></div>
        <!-- TRANSITION -->
        <div class="zoom-dot" data-level="2" title="Entering Sun" data-realm="transition"></div>
        <!-- KNOWLEDGE REALM (inward) -->
        <div class="zoom-dot" data-level="3" title="Hex Grid" data-realm="knowledge"></div>
        <div class="zoom-dot" data-level="4" title="Hex Details" data-realm="knowledge"></div>
        <div class="zoom-dot" data-level="5" title="Atomic" data-realm="knowledge"></div>
        <div class="zoom-dot" data-level="6" title="Subatomic" data-realm="knowledge"></div>
      </div>
      <div class="zoom-label" id="zoom-level-label">Universe</div>
      <div class="zoom-breadcrumb" id="breadcrumb">
        <span class="breadcrumb-item current">Universe</span>
      </div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // STATE â€” Two realms: Space (outward) and Knowledge (inward)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    var state = {
      scale: 0.5,  // Start zoomed out to see universe
      panX: 0,
      panY: 0,
      zoomLevel: 0,
      realm: 'space',  // 'space' | 'transition' | 'knowledge'
      currentDomain: null,
      currentSkill: null,
      currentConcept: null,
      isPanning: false,
      startX: 0,
      startY: 0,
      startPanX: 0,
      startPanY: 0
    };

    var MIN_SCALE = 0.2;
    var MAX_SCALE = 12;
    var ZOOM_SENSITIVITY = 0.002;

    // 7 zoom levels across two realms
    var zoomLevels = [
      'Universe',       // 0 - Space realm
      'Solar System',   // 1 - Space realm (your sun + orbiting people)
      'Entering Sun',   // 2 - Transition (plasma â†’ geometry)
      'Hex Grid',       // 3 - Knowledge realm (major domains)
      'Hex Details',    // 4 - Knowledge realm (sub-domains)
      'Atomic',         // 5 - Knowledge realm (concepts)
      'Subatomic'       // 6 - Knowledge realm (syntax/quirks)
    ];

    var zoomContainer = document.getElementById('zoom-container');
    var spotlightLayer = document.getElementById('spotlight-layer');
    var blurLayer = document.getElementById('blur-layer');
    var universeLayer = document.getElementById('universe-layer');
    var sunTransitionZone = document.getElementById('sun-transition-zone');
    var knowledgeCore = document.getElementById('knowledge-core');
    var hexGrid = document.getElementById('hex-grid');
    var hexDetail = document.getElementById('hex-detail');
    var atomicLayer = document.getElementById('atomic-layer');
    var subatomicLayer = document.getElementById('subatomic-layer');
    var zoomDisplay = document.getElementById('zoom-display');
    var zoomLevelLabel = document.getElementById('zoom-level-label');
    var breadcrumb = document.getElementById('breadcrumb');
    var universeLegend = document.getElementById('universe-legend');

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TRANSFORM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function applyTransform() {
      zoomContainer.style.transform =
        'translate(' + state.panX + 'px, ' + state.panY + 'px) scale(' + state.scale + ')';
      zoomDisplay.textContent = Math.round(state.scale * 100) + '%';
      updateZoomLevel();
      updateLayerVisibility();
      updateSpotlightIntensity();
    }

    function updateZoomLevel() {
      var oldLevel = state.zoomLevel;
      var oldRealm = state.realm;

      // 7 zoom levels across two realms with transition
      if (state.scale < 0.6) {
        state.zoomLevel = 0; // Universe
        state.realm = 'space';
      } else if (state.scale < 1.5) {
        state.zoomLevel = 1; // Solar System
        state.realm = 'space';
      } else if (state.scale < 2.5) {
        state.zoomLevel = 2; // Entering Sun (transition)
        state.realm = 'transition';
      } else if (state.scale < 4.0) {
        state.zoomLevel = 3; // Hex Grid
        state.realm = 'knowledge';
      } else if (state.scale < 6.0) {
        state.zoomLevel = 4; // Hex Details
        state.realm = 'knowledge';
      } else if (state.scale < 9.0) {
        state.zoomLevel = 5; // Atomic
        state.realm = 'knowledge';
      } else {
        state.zoomLevel = 6; // Subatomic
        state.realm = 'knowledge';
      }

      if (oldLevel !== state.zoomLevel) {
        zoomLevelLabel.textContent = zoomLevels[state.zoomLevel];
        updateZoomDots();
      }

      // Trigger realm transition effects
      if (oldRealm !== state.realm) {
        document.body.classList.remove('realm-space', 'realm-transition', 'realm-knowledge');
        document.body.classList.add('realm-' + state.realm);
      }
    }

    function updateZoomDots() {
      document.querySelectorAll('.zoom-dot').forEach(function(dot, i) {
        dot.classList.toggle('active', i <= state.zoomLevel);
      });
    }

    // Track previous visibility states for emerging animations
    var prevLayerStates = {
      transition: false, hexGrid: false, hexDetail: false, atomic: false, subatomic: false
    };

    function updateLayerVisibility() {
      var root = document.documentElement;
      var scale = state.scale;

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // TWO REALMS: SPACE (outward) â†’ KNOWLEDGE (inward)
      // The sun is the portal between them
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      // SPACE REALM: Universe + Solar System
      // Universe layer: visible at small scales, fades as you approach sun
      var universeOpacity = scale < 1.0 ? 1 : Math.max(0, 1 - (scale - 1.0) / 1.0);
      root.style.setProperty('--universe-opacity', universeOpacity.toString());
      universeLegend.classList.toggle('hidden', universeOpacity < 0.3);

      // Solar system (orbiting people): visible from 0.6 to 2.5
      var solarFadeIn = Math.min(1, Math.max(0, (scale - 0.5) / 0.3));
      var solarFadeOut = scale > 2.0 ? Math.max(0, 1 - (scale - 2.0) / 1.0) : 1;
      var solarOpacity = solarFadeIn * solarFadeOut;
      root.style.setProperty('--solar-system-opacity', solarOpacity.toString());

      // TRANSITION: Entering the Sun (plasma â†’ crystalline geometry)
      // Visible from 1.5 to 3.5 â€” the boundary between realms
      var transitionFadeIn = Math.min(1, Math.max(0, (scale - 1.5) / 0.5));
      var transitionFadeOut = scale > 3.0 ? Math.max(0, 1 - (scale - 3.0) / 1.0) : 1;
      var transitionOpacity = transitionFadeIn * transitionFadeOut;
      root.style.setProperty('--transition-opacity', transitionOpacity.toString());

      // KNOWLEDGE REALM: Hexagonal structure emerges as space fades

      // Knowledge core container: appears after transition begins
      var knowledgeOpacity = Math.min(1, Math.max(0, (scale - 2.0) / 1.0));
      root.style.setProperty('--knowledge-core-opacity', knowledgeOpacity.toString());

      // Hex Grid (major domains): fade in from 2.5 to 4.0, fade out from 5.5 to 7.0
      var hexGridFadeIn = Math.min(1, Math.max(0, (scale - 2.5) / 1.5));
      var hexGridFadeOut = scale > 5.5 ? Math.max(0.05, 1 - (scale - 5.5) / 1.5) : 1;
      root.style.setProperty('--hex-grid-opacity', (hexGridFadeIn * hexGridFadeOut).toString());

      // Hex Details (sub-domains): fade in from 4.0 to 6.0, fade out from 8.0 to 10.0
      var hexDetailFadeIn = Math.min(1, Math.max(0, (scale - 4.0) / 2.0));
      var hexDetailFadeOut = scale > 8.0 ? Math.max(0.05, 1 - (scale - 8.0) / 2.0) : 1;
      root.style.setProperty('--hex-detail-opacity', (hexDetailFadeIn * hexDetailFadeOut).toString());

      // Atomic (concepts): fade in from 6.0 to 9.0
      var atomicFadeIn = Math.min(1, Math.max(0, (scale - 6.0) / 3.0));
      var atomicFadeOut = scale > 10.0 ? Math.max(0.1, 1 - (scale - 10.0) / 2.0) : 1;
      root.style.setProperty('--atomic-opacity', (atomicFadeIn * atomicFadeOut).toString());

      // Subatomic (syntax/quirks): fade in from 9.0 onward
      var subatomicOpacity = Math.min(1, Math.max(0, (scale - 9.0) / 3.0));
      root.style.setProperty('--subatomic-opacity', subatomicOpacity.toString());

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // LAYER VISIBILITY â€” Toggle and trigger emerging animations
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      var transitionVisible = scale >= 1.5;
      var hexGridVisible = scale >= 2.5;
      var hexDetailVisible = scale >= 4.0;
      var atomicVisible = scale >= 6.0;
      var subatomicVisible = scale >= 9.0;

      // Trigger emerging animation when layer first becomes visible
      if (transitionVisible && !prevLayerStates.transition && sunTransitionZone) {
        sunTransitionZone.classList.add('emerging');
        setTimeout(function() { sunTransitionZone.classList.remove('emerging'); }, 800);
      }
      if (hexGridVisible && !prevLayerStates.hexGrid && hexGrid) {
        hexGrid.classList.add('emerging');
        setTimeout(function() { hexGrid.classList.remove('emerging'); }, 700);
      }
      if (hexDetailVisible && !prevLayerStates.hexDetail && hexDetail) {
        hexDetail.classList.add('emerging');
        setTimeout(function() { hexDetail.classList.remove('emerging'); }, 600);
      }
      if (atomicVisible && !prevLayerStates.atomic && atomicLayer) {
        atomicLayer.classList.add('emerging');
        setTimeout(function() { atomicLayer.classList.remove('emerging'); }, 500);
      }
      if (subatomicVisible && !prevLayerStates.subatomic && subatomicLayer) {
        subatomicLayer.classList.add('emerging');
        setTimeout(function() { subatomicLayer.classList.remove('emerging'); }, 400);
      }

      prevLayerStates.transition = transitionVisible;
      prevLayerStates.hexGrid = hexGridVisible;
      prevLayerStates.hexDetail = hexDetailVisible;
      prevLayerStates.atomic = atomicVisible;
      prevLayerStates.subatomic = subatomicVisible;

      if (sunTransitionZone) sunTransitionZone.classList.toggle('visible', transitionVisible);
      if (knowledgeCore) knowledgeCore.classList.toggle('visible', hexGridVisible);
      if (hexGrid) hexGrid.classList.toggle('visible', hexGridVisible);
      if (hexDetail) hexDetail.classList.toggle('visible', hexDetailVisible);
      if (atomicLayer) atomicLayer.classList.toggle('visible', atomicVisible);
      if (subatomicLayer) subatomicLayer.classList.toggle('visible', subatomicVisible);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SPOTLIGHT + BLUR EFFECT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    var spotlightPos = { x: '50%', y: '50%' };

    function updateSpotlightIntensity() {
      var root = document.documentElement;

      // Spotlight and blur gradually appear as you zoom in past level 2
      var intensity = 0;
      var blurIntensity = 0;
      if (state.scale > 1.6) {
        intensity = Math.min(0.65, (state.scale - 1.6) / 5);
        blurIntensity = Math.min(0.5, (state.scale - 1.6) / 6);
      }

      root.style.setProperty('--spotlight-intensity', intensity.toString());
      root.style.setProperty('--blur-intensity', blurIntensity.toString());

      var radius = Math.max(200, 420 - (state.scale * 25));
      root.style.setProperty('--spotlight-radius', radius + 'px');

      var maskGradient = 'radial-gradient(circle ' + radius + 'px at ' + spotlightPos.x + ' ' + spotlightPos.y + ', transparent 0%, transparent 65%, black 90%, black 100%)';
      blurLayer.style.maskImage = maskGradient;
      blurLayer.style.webkitMaskImage = maskGradient;
    }

    function updateSpotlightPosition(e) {
      var root = document.documentElement;
      var x = e.clientX + 'px';
      var y = e.clientY + 'px';

      spotlightPos.x = x;
      spotlightPos.y = y;

      root.style.setProperty('--spotlight-x', x);
      root.style.setProperty('--spotlight-y', y);

      var radius = getComputedStyle(root).getPropertyValue('--spotlight-radius').trim() || '400px';
      var maskGradient = 'radial-gradient(circle ' + radius + ' at ' + x + ' ' + y + ', transparent 0%, transparent 65%, black 90%, black 100%)';
      blurLayer.style.maskImage = maskGradient;
      blurLayer.style.webkitMaskImage = maskGradient;
    }

    document.addEventListener('mousemove', updateSpotlightPosition);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ZOOM TO CURSOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function zoomAtPoint(clientX, clientY, delta) {
      var viewport = document.querySelector('.zoom-viewport');
      var rect = viewport.getBoundingClientRect();
      var mx = clientX - rect.left;
      var my = clientY - rect.top;

      var zoomFactor = 1 - delta * ZOOM_SENSITIVITY;
      var newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, state.scale * zoomFactor));

      if (newScale === state.scale) return;

      var contentX = (mx - rect.width / 2 - state.panX) / state.scale;
      var contentY = (my - rect.height / 2 - state.panY) / state.scale;

      state.scale = newScale;
      state.panX = mx - rect.width / 2 - contentX * state.scale;
      state.panY = my - rect.height / 2 - contentY * state.scale;

      applyTransform();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.querySelector('.zoom-viewport').addEventListener('mousedown', function(e) {
      // Don't pan when clicking on interactive elements
      if (e.target.closest('.hex-cell') ||
          e.target.closest('.hex-detail-cell') ||
          e.target.closest('.atomic-cell') ||
          e.target.closest('.subatomic-quark') ||
          e.target.closest('.user-body') ||
          e.target.closest('.knowledge-sun') ||
          e.target.closest('.distant-galaxy')) return;

      state.isPanning = true;
      state.startX = e.clientX;
      state.startY = e.clientY;
      state.startPanX = state.panX;
      state.startPanY = state.panY;
      zoomContainer.classList.add('dragging');
    });

    document.addEventListener('mousemove', function(e) {
      if (!state.isPanning) return;
      state.panX = state.startPanX + (e.clientX - state.startX);
      state.panY = state.startPanY + (e.clientY - state.startY);
      applyTransform();
    });

    document.addEventListener('mouseup', function() {
      state.isPanning = false;
      zoomContainer.classList.remove('dragging');
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // WHEEL ZOOM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.querySelector('.zoom-viewport').addEventListener('wheel', function(e) {
      e.preventDefault();
      zoomAtPoint(e.clientX, e.clientY, e.deltaY);
    }, { passive: false });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONTROL BUTTONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.getElementById('zoom-in').addEventListener('click', function() {
      var rect = document.querySelector('.zoom-viewport').getBoundingClientRect();
      zoomAtPoint(rect.width / 2, rect.height / 2, -150);
    });

    document.getElementById('zoom-out').addEventListener('click', function() {
      var rect = document.querySelector('.zoom-viewport').getBoundingClientRect();
      zoomAtPoint(rect.width / 2, rect.height / 2, 150);
    });

    document.getElementById('reset-view').addEventListener('click', function() {
      zoomContainer.classList.add('animating');
      state.scale = 0.5;
      state.panX = 0;
      state.panY = 0;
      state.currentDomain = null;
      state.currentField = null;
      state.currentDiscipline = null;
      state.currentTopic = null;
      state.currentConcept = null;
      applyTransform();
      updateBreadcrumb([{ label: 'Universe', level: 'universe' }]);
      setTimeout(function() { zoomContainer.classList.remove('animating'); }, 600);
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // BREADCRUMB
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function updateBreadcrumb(path) {
      while (breadcrumb.firstChild) {
        breadcrumb.removeChild(breadcrumb.firstChild);
      }

      path.forEach(function(item, i) {
        if (i > 0) {
          var sep = document.createElement('span');
          sep.className = 'breadcrumb-sep';
          sep.textContent = '\u203A';
          breadcrumb.appendChild(sep);
        }

        var crumb = document.createElement('span');
        crumb.className = 'breadcrumb-item' + (i === path.length - 1 ? ' current' : '');
        crumb.textContent = item.label;
        crumb.dataset.level = item.level;

        if (i < path.length - 1) {
          crumb.addEventListener('click', function() {
            navigateToLevel(this.dataset.level);
          });
        }

        breadcrumb.appendChild(crumb);
      });
    }

    function navigateToLevel(level) {
      zoomContainer.classList.add('animating');

      if (level === 'universe') {
        state.scale = 0.5;
        state.panX = 0;
        state.panY = 0;
        state.currentDomain = null;
        state.currentField = null;
        state.currentDiscipline = null;
        state.currentTopic = null;
        state.currentConcept = null;
        updateBreadcrumb([{ label: 'Universe', level: 'universe' }]);
      }

      applyTransform();
      setTimeout(function() { zoomContainer.classList.remove('animating'); }, 600);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ZOOM DOT CLICKS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.querySelectorAll('.zoom-dot').forEach(function(dot) {
      dot.addEventListener('click', function() {
        var level = parseInt(this.dataset.level);
        // Scale targets for each of the 9 levels
        var targetScales = [0.4, 0.8, 1.3, 2.0, 3.0, 4.2, 6.0, 8.2, 10.5];

        zoomContainer.classList.add('animating');
        state.scale = targetScales[level];
        applyTransform();
        setTimeout(function() { zoomContainer.classList.remove('animating'); }, 600);
      });
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ORBIT ANIMATIONS â€” User orbits and skill orbits
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    var orbitState = {
      userIsSlowed: false,
      skillIsSlowed: false,
      // User orbit speeds (degrees/second)
      userSpeeds: [6, -4, 3, -2],
      // Skill orbit speeds
      skillSpeeds: [18, -13, 8, -6],
      slowMultiplier: 0.15,
      userMultiplier: 1,
      skillMultiplier: 1,
      userAngles: [0, 0, 0, 0],
      skillAngles: [0, 0, 0, 0],
      lastTime: performance.now()
    };

    var userOrbitRings = [
      document.getElementById('user-orbit-1'),
      document.getElementById('user-orbit-2'),
      document.getElementById('user-orbit-3'),
      document.getElementById('user-orbit-4')
    ];

    var skillOrbitRings = [
      document.getElementById('skill-ring-1'),
      document.getElementById('skill-ring-2'),
      document.getElementById('skill-ring-3'),
      document.getElementById('skill-ring-4')
    ];

    function animateOrbits(currentTime) {
      var deltaTime = (currentTime - orbitState.lastTime) / 1000;
      orbitState.lastTime = currentTime;

      // Smoothly interpolate multipliers
      var userTarget = orbitState.userIsSlowed ? orbitState.slowMultiplier : 1;
      orbitState.userMultiplier += (userTarget - orbitState.userMultiplier) * 0.08;

      var skillTarget = orbitState.skillIsSlowed ? orbitState.slowMultiplier : 1;
      orbitState.skillMultiplier += (skillTarget - orbitState.skillMultiplier) * 0.08;

      // Update user orbit rotations
      for (var i = 0; i < 4; i++) {
        var userSpeed = orbitState.userSpeeds[i] * orbitState.userMultiplier;
        orbitState.userAngles[i] += userSpeed * deltaTime;
        if (userOrbitRings[i]) {
          userOrbitRings[i].style.transform = 'translate(-50%, -50%) rotate(' + orbitState.userAngles[i] + 'deg)';
          userOrbitRings[i].style.setProperty('--counter-rotate', (-orbitState.userAngles[i]) + 'deg');
        }
      }

      // Update skill orbit rotations
      for (var j = 0; j < 4; j++) {
        var skillSpeed = orbitState.skillSpeeds[j] * orbitState.skillMultiplier;
        orbitState.skillAngles[j] += skillSpeed * deltaTime;
        if (skillOrbitRings[j]) {
          skillOrbitRings[j].style.transform = 'rotate(' + orbitState.skillAngles[j] + 'deg)';
          skillOrbitRings[j].style.setProperty('--counter-rotate', (-orbitState.skillAngles[j]) + 'deg');
        }
      }

      requestAnimationFrame(animateOrbits);
    }

    requestAnimationFrame(animateOrbits);

    // Hover detection for user orbits
    userOrbitRings.forEach(function(ring) {
      if (!ring) return;
      ring.addEventListener('mouseenter', function() {
        orbitState.userIsSlowed = true;
      });
      ring.addEventListener('mouseleave', function() {
        orbitState.userIsSlowed = false;
      });
    });

    // Hover detection for skill orbits
    var skillOrbitZone = document.getElementById('skill-orbit-zone');
    if (skillOrbitZone) {
      skillOrbitZone.addEventListener('mouseenter', function() {
        orbitState.skillIsSlowed = true;
      });
      skillOrbitZone.addEventListener('mouseleave', function() {
        orbitState.skillIsSlowed = false;
      });
    }

    document.querySelectorAll('.skill-body').forEach(function(body) {
      body.addEventListener('mouseenter', function() {
        orbitState.skillIsSlowed = true;
      });
      body.addEventListener('mouseleave', function(e) {
        if (!e.relatedTarget || !e.relatedTarget.closest('.skill-orbit-ring, .skill-orbit-zone')) {
          orbitState.skillIsSlowed = false;
        }
      });
    });

    document.querySelectorAll('.user-body').forEach(function(body) {
      body.addEventListener('mouseenter', function() {
        orbitState.userIsSlowed = true;
      });
      body.addEventListener('mouseleave', function(e) {
        if (!e.relatedTarget || !e.relatedTarget.closest('.user-orbit-ring')) {
          orbitState.userIsSlowed = false;
        }
      });
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CLICK HANDLERS â€” Zoom Into Elements
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function zoomIntoElement(element, targetScale) {
      var universe = document.getElementById('knowledge-universe');
      var universeRect = universe.getBoundingClientRect();
      var elRect = element.getBoundingClientRect();
      var viewRect = document.querySelector('.zoom-viewport').getBoundingClientRect();

      var universeCenterX = universeRect.left + universeRect.width / 2;
      var universeCenterY = universeRect.top + universeRect.height / 2;
      var elCenterX = elRect.left + elRect.width / 2;
      var elCenterY = elRect.top + elRect.height / 2;

      var screenOffsetX = elCenterX - universeCenterX;
      var screenOffsetY = elCenterY - universeCenterY;
      var contentOffsetX = screenOffsetX / state.scale;
      var contentOffsetY = screenOffsetY / state.scale;

      zoomContainer.classList.add('animating');

      state.panX = -contentOffsetX * targetScale;
      state.panY = -contentOffsetY * targetScale;
      state.scale = targetScale;

      applyTransform();
      setTimeout(function() { zoomContainer.classList.remove('animating'); }, 600);
    }

    // Knowledge Sun click â€” zoom into "You"
    document.getElementById('knowledge-sun').addEventListener('click', function(e) {
      e.stopPropagation();
      zoomIntoElement(this, 1);
      updateBreadcrumb([
        { label: 'Universe', level: 'universe' },
        { label: 'You', level: 'you' }
      ]);
    });

    // Domain clicks
    document.querySelectorAll('.domain-cluster').forEach(function(domain) {
      domain.addEventListener('click', function(e) {
        e.stopPropagation();
        state.currentDomain = this.dataset.domain;

        var label = this.dataset.domain.charAt(0).toUpperCase() + this.dataset.domain.slice(1);
        updateBreadcrumb([
          { label: 'Universe', level: 'universe' },
          { label: 'You', level: 'you' },
          { label: label, level: 'domain' }
        ]);

        zoomIntoElement(this, 2);
      });
    });

    // Topic clicks
    document.querySelectorAll('.topic-node').forEach(function(topic) {
      topic.addEventListener('click', function(e) {
        e.stopPropagation();

        var topicLabel = this.dataset.topic.charAt(0).toUpperCase() + this.dataset.topic.slice(1);
        updateBreadcrumb([
          { label: 'Universe', level: 'universe' },
          { label: topicLabel, level: 'topic' }
        ]);

        zoomIntoElement(this, 6);
      });
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INITIALIZE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    applyTransform();
    updateBreadcrumb([{ label: 'Universe', level: 'universe' }]);
  </script>
</body>
</html>
