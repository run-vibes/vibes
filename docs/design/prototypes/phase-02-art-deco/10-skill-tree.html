<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skill Tree â€” Knowledge Landscape</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poiret+One&family=Raleway:wght@300;400;500;600&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DESIGN TOKENS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      /* Colors - Deep noir palette */
      --bg-deep: #0a0a0c;
      --bg-base: #121218;
      --bg-elevated: #1a1a22;
      --bg-surface: #22222c;

      /* Gold spectrum */
      --gold-primary: #d4a84b;
      --gold-bright: #e8c875;
      --gold-muted: rgba(212, 168, 75, 0.6);
      --gold-dim: rgba(212, 168, 75, 0.3);
      --gold-subtle: rgba(212, 168, 75, 0.15);
      --gold-ghost: rgba(212, 168, 75, 0.08);

      /* Accent colors */
      --accent-teal: #3d8b8b;
      --accent-teal-muted: rgba(61, 139, 139, 0.4);
      --accent-success: #4da84d;
      --accent-warning: #d4844b;
      --accent-error: #c45c5c;

      /* Text hierarchy */
      --text-primary: #f0e6d3;
      --text-secondary: #a89a85;
      --text-tertiary: #6b6358;
      --text-muted: #4a453d;

      /* Borders */
      --border-strong: var(--gold-muted);
      --border-light: var(--gold-dim);
      --border-subtle: var(--gold-ghost);

      /* Typography */
      --font-display: 'Poiret One', cursive;
      --font-heading: 'Bebas Neue', sans-serif;
      --font-body: 'Raleway', sans-serif;

      /* Spacing */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-6: 24px;
      --space-8: 32px;

      /* Effects */
      --glow-gold: 0 0 20px rgba(212, 168, 75, 0.3);
      --glow-gold-strong: 0 0 30px rgba(212, 168, 75, 0.5);
      --glow-teal: 0 0 20px rgba(61, 139, 139, 0.4);
      --glow-success: 0 0 15px rgba(77, 168, 77, 0.4);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BASE STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-deep);
      color: var(--text-primary);
      min-height: 100vh;
      overflow: hidden;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYOUT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .app-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-4) var(--space-6);
      background: var(--bg-base);
      border-bottom: 1px solid var(--border-subtle);
      z-index: 100;
    }

    .header-title {
      font-family: var(--font-display);
      font-size: 24px;
      color: var(--gold-primary);
      letter-spacing: 0.05em;
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-family: var(--font-body);
      font-size: 13px;
      color: var(--text-tertiary);
    }

    .breadcrumb-item {
      color: var(--text-secondary);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .breadcrumb-item:hover {
      color: var(--gold-primary);
    }

    .breadcrumb-item.active {
      color: var(--gold-primary);
      cursor: default;
    }

    .breadcrumb-sep {
      color: var(--gold-dim);
    }

    .zoom-controls {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .zoom-btn {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-elevated);
      border: 1px solid var(--border-light);
      color: var(--gold-primary);
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .zoom-btn:hover {
      background: var(--gold-subtle);
      border-color: var(--gold-muted);
    }

    .zoom-level {
      font-family: var(--font-body);
      font-size: 12px;
      color: var(--text-tertiary);
      min-width: 50px;
      text-align: center;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SKILL TREE VIEWPORT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .viewport {
      flex: 1;
      position: relative;
      overflow: hidden;
      background:
        radial-gradient(ellipse at center, var(--bg-base) 0%, var(--bg-deep) 70%),
        repeating-radial-gradient(circle at center, transparent 0, transparent 40px, var(--gold-ghost) 40px, var(--gold-ghost) 41px);
    }

    .tree-container {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: center center;
      cursor: grab;
    }

    .tree-container.dragging {
      cursor: grabbing;
    }

    .tree-container.animating {
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RADIAL TREE STRUCTURE
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .tree-root {
      position: relative;
      width: 800px;
      height: 800px;
    }

    /* Center node */
    .center-node {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      background: var(--bg-elevated);
      border: 2px solid var(--gold-primary);
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: var(--glow-gold-strong);
      z-index: 10;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .center-node:hover {
      transform: translate(-50%, -50%) scale(1.05);
      box-shadow: var(--glow-gold-strong), 0 0 40px rgba(212, 168, 75, 0.4);
    }

    .center-node-icon {
      font-size: 32px;
      margin-bottom: var(--space-1);
    }

    .center-node-label {
      font-family: var(--font-display);
      font-size: 14px;
      color: var(--gold-primary);
      text-align: center;
    }

    .center-node-count {
      font-size: 10px;
      color: var(--text-tertiary);
      margin-top: 2px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CLUSTER NODES (Zoomed Out View)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .cluster {
      position: absolute;
      transform: translate(-50%, -50%);
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .cluster-frame {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--space-6);
      background: var(--bg-elevated);
      border: 1px solid var(--border-light);
      transition: all 0.3s ease;
    }

    /* Art Deco octagon shape */
    .cluster-frame {
      clip-path: polygon(
        30% 0%, 70% 0%,
        100% 30%, 100% 70%,
        70% 100%, 30% 100%,
        0% 70%, 0% 30%
      );
    }

    .cluster:hover .cluster-frame {
      border-color: var(--gold-primary);
      background: var(--bg-surface);
      box-shadow: var(--glow-gold);
    }

    .cluster-icon {
      font-size: 28px;
      margin-bottom: var(--space-2);
    }

    .cluster-label {
      font-family: var(--font-heading);
      font-size: 16px;
      letter-spacing: 0.1em;
      color: var(--text-primary);
      text-align: center;
    }

    .cluster-stats {
      display: flex;
      gap: var(--space-3);
      margin-top: var(--space-2);
      font-size: 10px;
      color: var(--text-tertiary);
    }

    .cluster-stat {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .cluster-stat-value {
      color: var(--gold-muted);
    }

    /* Cluster size variants */
    .cluster.size-lg .cluster-frame {
      width: 140px;
      height: 140px;
    }

    .cluster.size-md .cluster-frame {
      width: 120px;
      height: 120px;
    }

    .cluster.size-sm .cluster-frame {
      width: 100px;
      height: 100px;
    }

    /* Cluster activity glow */
    .cluster.active .cluster-frame {
      box-shadow: var(--glow-gold);
    }

    .cluster.frontier .cluster-frame {
      border-color: var(--accent-teal-muted);
      box-shadow: var(--glow-teal);
    }

    .cluster.frontier .cluster-label {
      color: var(--accent-teal);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONNECTION LINES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .connections {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .connections svg {
      width: 100%;
      height: 100%;
    }

    .connection-line {
      stroke: var(--gold-dim);
      stroke-width: 1;
      fill: none;
      opacity: 0.6;
    }

    .connection-line.strong {
      stroke: var(--gold-muted);
      stroke-width: 2;
      opacity: 0.8;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SKILL NODES (Zoomed In View)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .skills-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }

    .skills-layer.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .skill-node {
      position: absolute;
      transform: translate(-50%, -50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .skill-dot {
      width: 48px;
      height: 48px;
      background: var(--bg-elevated);
      border: 2px solid var(--border-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.3s ease;
    }

    .skill-node:hover .skill-dot {
      border-color: var(--gold-primary);
      box-shadow: var(--glow-gold);
      transform: scale(1.1);
    }

    .skill-label {
      margin-top: var(--space-2);
      font-size: 11px;
      color: var(--text-secondary);
      text-align: center;
      max-width: 80px;
      transition: color 0.3s ease;
    }

    .skill-node:hover .skill-label {
      color: var(--gold-primary);
    }

    /* Skill states */
    .skill-node.mastered .skill-dot {
      border-color: var(--gold-primary);
      background: var(--gold-subtle);
    }

    .skill-node.learning .skill-dot {
      border-color: var(--accent-teal);
      box-shadow: var(--glow-teal);
    }

    .skill-node.frontier .skill-dot {
      border-style: dashed;
      border-color: var(--accent-teal-muted);
      opacity: 0.7;
    }

    .skill-node.frontier .skill-label {
      color: var(--text-tertiary);
    }

    .skill-node.discovered .skill-dot {
      border-color: var(--accent-success);
      box-shadow: var(--glow-success);
    }

    .skill-node.discovered::after {
      content: 'AI';
      position: absolute;
      top: -4px;
      right: -4px;
      font-size: 8px;
      padding: 2px 4px;
      background: var(--accent-success);
      color: var(--bg-deep);
      border-radius: 2px;
      font-weight: 600;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MINIMAP
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .minimap {
      position: absolute;
      bottom: var(--space-6);
      right: var(--space-6);
      width: 150px;
      height: 150px;
      background: var(--bg-base);
      border: 1px solid var(--border-light);
      opacity: 0.8;
      z-index: 50;
      overflow: hidden;
    }

    .minimap-content {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .minimap-dot {
      position: absolute;
      width: 8px;
      height: 8px;
      background: var(--gold-dim);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .minimap-dot.active {
      background: var(--gold-primary);
      box-shadow: 0 0 6px var(--gold-primary);
    }

    .minimap-viewport {
      position: absolute;
      border: 1px solid var(--gold-primary);
      background: rgba(212, 168, 75, 0.1);
      transition: all 0.3s ease;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DETAIL PANEL (appears on skill hover)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .detail-panel {
      position: absolute;
      bottom: var(--space-6);
      left: var(--space-6);
      width: 280px;
      background: var(--bg-elevated);
      border: 1px solid var(--border-light);
      padding: var(--space-4);
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
      pointer-events: none;
      z-index: 50;
    }

    .detail-panel.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .detail-header {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-3);
      border-bottom: 1px solid var(--border-subtle);
    }

    .detail-icon {
      font-size: 24px;
    }

    .detail-title {
      font-family: var(--font-heading);
      font-size: 18px;
      letter-spacing: 0.05em;
      color: var(--gold-primary);
    }

    .detail-subtitle {
      font-size: 11px;
      color: var(--text-tertiary);
    }

    .detail-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }

    .detail-stat {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .detail-stat-label {
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-tertiary);
    }

    .detail-stat-value {
      font-size: 14px;
      color: var(--text-primary);
    }

    .detail-connections {
      font-size: 11px;
      color: var(--text-secondary);
    }

    .detail-connections strong {
      color: var(--gold-muted);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LEGEND
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .legend {
      position: absolute;
      top: var(--space-6);
      right: var(--space-6);
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
      padding: var(--space-3);
      background: var(--bg-base);
      border: 1px solid var(--border-subtle);
      z-index: 50;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: 10px;
      color: var(--text-tertiary);
    }

    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid;
    }

    .legend-dot.mastered {
      border-color: var(--gold-primary);
      background: var(--gold-subtle);
    }

    .legend-dot.learning {
      border-color: var(--accent-teal);
    }

    .legend-dot.frontier {
      border-style: dashed;
      border-color: var(--accent-teal-muted);
    }

    .legend-dot.discovered {
      border-color: var(--accent-success);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ZOOM STATES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .tree-container[data-zoom="overview"] {
      transform: scale(0.8);
    }

    .tree-container[data-zoom="cluster"] {
      transform: scale(1.5);
    }

    .tree-container[data-zoom="skill"] {
      transform: scale(2.5);
    }

    /* Hide clusters when zoomed in */
    .tree-container[data-zoom="cluster"] .cluster,
    .tree-container[data-zoom="skill"] .cluster {
      opacity: 0;
      pointer-events: none;
    }

    /* Show skills when zoomed in */
    .tree-container[data-zoom="cluster"] .skills-layer,
    .tree-container[data-zoom="skill"] .skills-layer {
      opacity: 1;
      pointer-events: auto;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ANIMATIONS
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .cluster.frontier .cluster-frame {
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes glow-pulse {
      0%, 100% { box-shadow: var(--glow-gold); }
      50% { box-shadow: var(--glow-gold-strong); }
    }

    .cluster.active .cluster-frame {
      animation: glow-pulse 2s ease-in-out infinite;
    }

    /* Staggered entrance */
    .cluster {
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards;
    }

    .cluster:nth-child(1) { animation-delay: 0.1s; }
    .cluster:nth-child(2) { animation-delay: 0.15s; }
    .cluster:nth-child(3) { animation-delay: 0.2s; }
    .cluster:nth-child(4) { animation-delay: 0.25s; }
    .cluster:nth-child(5) { animation-delay: 0.3s; }
    .cluster:nth-child(6) { animation-delay: 0.35s; }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translate(-50%, -40%);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%);
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <h1 class="header-title">Knowledge Landscape</h1>

      <nav class="breadcrumb" id="breadcrumb">
        <span class="breadcrumb-item active" data-level="root">All Skills</span>
      </nav>

      <div class="zoom-controls">
        <button class="zoom-btn" id="zoom-out">âˆ’</button>
        <span class="zoom-level" id="zoom-level">100%</span>
        <button class="zoom-btn" id="zoom-in">+</button>
      </div>
    </header>

    <!-- Main Viewport -->
    <div class="viewport">
      <div class="tree-container" data-zoom="overview" id="tree-container">
        <div class="tree-root">

          <!-- Connection Lines (SVG) -->
          <div class="connections">
            <svg viewBox="0 0 800 800">
              <!-- Center to clusters -->
              <line class="connection-line strong" x1="400" y1="400" x2="400" y2="180"/>
              <line class="connection-line strong" x1="400" y1="400" x2="590" y2="280"/>
              <line class="connection-line strong" x1="400" y1="400" x2="590" y2="520"/>
              <line class="connection-line strong" x1="400" y1="400" x2="400" y2="620"/>
              <line class="connection-line strong" x1="400" y1="400" x2="210" y2="520"/>
              <line class="connection-line strong" x1="400" y1="400" x2="210" y2="280"/>

              <!-- Inter-cluster connections -->
              <line class="connection-line" x1="400" y1="180" x2="590" y2="280"/>
              <line class="connection-line" x1="590" y1="280" x2="590" y2="520"/>
              <line class="connection-line" x1="210" y1="280" x2="210" y2="520"/>
              <line class="connection-line" x1="210" y1="520" x2="400" y2="620"/>
              <line class="connection-line" x1="400" y1="620" x2="590" y2="520"/>
            </svg>
          </div>

          <!-- Center Node -->
          <div class="center-node" id="center-node">
            <span class="center-node-icon">â—†</span>
            <span class="center-node-label">Your Knowledge</span>
            <span class="center-node-count">247 discoveries</span>
          </div>

          <!-- Cluster: Finance & Investing -->
          <div class="cluster size-lg active" style="top: 22%; left: 50%;" data-cluster="finance">
            <div class="cluster-frame">
              <span class="cluster-icon">ğŸ“ˆ</span>
              <span class="cluster-label">FINANCE</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">38</span> skills</span>
                <span class="cluster-stat"><span class="cluster-stat-value">+5</span> new</span>
              </div>
            </div>
          </div>

          <!-- Cluster: Health & Medicine -->
          <div class="cluster size-md" style="top: 35%; left: 74%;" data-cluster="health">
            <div class="cluster-frame">
              <span class="cluster-icon">ğŸ§¬</span>
              <span class="cluster-label">HEALTH</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">31</span> skills</span>
                <span class="cluster-stat"><span class="cluster-stat-value">+3</span> new</span>
              </div>
            </div>
          </div>

          <!-- Cluster: Creative Arts -->
          <div class="cluster size-sm frontier" style="top: 65%; left: 74%;" data-cluster="creative">
            <div class="cluster-frame">
              <span class="cluster-icon">ğŸ¨</span>
              <span class="cluster-label">CREATIVE</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">24</span> skills</span>
              </div>
            </div>
          </div>

          <!-- Cluster: Technology -->
          <div class="cluster size-md" style="top: 78%; left: 50%;" data-cluster="technology">
            <div class="cluster-frame">
              <span class="cluster-icon">âš™</span>
              <span class="cluster-label">TECHNOLOGY</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">52</span> skills</span>
                <span class="cluster-stat"><span class="cluster-stat-value">+8</span> new</span>
              </div>
            </div>
          </div>

          <!-- Cluster: Business & Strategy -->
          <div class="cluster size-sm" style="top: 65%; left: 26%;" data-cluster="business">
            <div class="cluster-frame">
              <span class="cluster-icon">â™œ</span>
              <span class="cluster-label">BUSINESS</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">29</span> skills</span>
              </div>
            </div>
          </div>

          <!-- Cluster: Science & Research -->
          <div class="cluster size-md frontier" style="top: 35%; left: 26%;" data-cluster="science">
            <div class="cluster-frame">
              <span class="cluster-icon">ğŸ”¬</span>
              <span class="cluster-label">SCIENCE</span>
              <div class="cluster-stats">
                <span class="cluster-stat"><span class="cluster-stat-value">43</span> skills</span>
                <span class="cluster-stat"><span class="cluster-stat-value">+12</span> new</span>
              </div>
            </div>
          </div>

          <!-- Skills Layer (visible when zoomed in) -->
          <div class="skills-layer" id="skills-layer">
            <!-- Finance skills -->
            <div class="skill-node mastered" style="top: 18%; left: 45%;" data-cluster="finance">
              <div class="skill-dot">ğŸ’¹</div>
              <span class="skill-label">Options Trading</span>
            </div>
            <div class="skill-node mastered" style="top: 14%; left: 54%;" data-cluster="finance">
              <div class="skill-dot">ğŸ“Š</div>
              <span class="skill-label">DCF Analysis</span>
            </div>
            <div class="skill-node learning" style="top: 24%; left: 58%;" data-cluster="finance">
              <div class="skill-dot">ğŸ¦</div>
              <span class="skill-label">Fixed Income</span>
            </div>
            <div class="skill-node discovered" style="top: 20%; left: 40%;" data-cluster="finance">
              <div class="skill-dot">âš¡</div>
              <span class="skill-label">Factor Investing</span>
            </div>
            <div class="skill-node frontier" style="top: 12%; left: 48%;" data-cluster="finance">
              <div class="skill-dot">ğŸŒ</div>
              <span class="skill-label">Macro Trading</span>
            </div>

            <!-- Health skills -->
            <div class="skill-node mastered" style="top: 32%; left: 70%;" data-cluster="health">
              <div class="skill-dot">ğŸ§ </div>
              <span class="skill-label">Neuroscience</span>
            </div>
            <div class="skill-node learning" style="top: 38%; left: 78%;" data-cluster="health">
              <div class="skill-dot">ğŸ’Š</div>
              <span class="skill-label">Pharmacology</span>
            </div>
            <div class="skill-node frontier" style="top: 30%; left: 76%;" data-cluster="health">
              <div class="skill-dot">ğŸ§¬</div>
              <span class="skill-label">Gene Therapy</span>
            </div>
            <div class="skill-node discovered" style="top: 40%; left: 72%;" data-cluster="health">
              <div class="skill-dot">ğŸ”„</div>
              <span class="skill-label">Circadian Biology</span>
            </div>

            <!-- Creative skills -->
            <div class="skill-node mastered" style="top: 62%; left: 70%;" data-cluster="creative">
              <div class="skill-dot">ğŸ¹</div>
              <span class="skill-label">Music Theory</span>
            </div>
            <div class="skill-node learning" style="top: 68%; left: 78%;" data-cluster="creative">
              <div class="skill-dot">ğŸ“·</div>
              <span class="skill-label">Photography</span>
            </div>
            <div class="skill-node frontier" style="top: 60%; left: 76%;" data-cluster="creative">
              <div class="skill-dot">âœï¸</div>
              <span class="skill-label">Screenwriting</span>
            </div>

            <!-- Technology skills -->
            <div class="skill-node mastered" style="top: 75%; left: 45%;" data-cluster="technology">
              <div class="skill-dot">ğŸ¦€</div>
              <span class="skill-label">Rust</span>
            </div>
            <div class="skill-node mastered" style="top: 82%; left: 52%;" data-cluster="technology">
              <div class="skill-dot">ğŸ</div>
              <span class="skill-label">Python</span>
            </div>
            <div class="skill-node learning" style="top: 78%; left: 58%;" data-cluster="technology">
              <div class="skill-dot">ğŸ¤–</div>
              <span class="skill-label">LLM Fine-tuning</span>
            </div>
            <div class="skill-node discovered" style="top: 80%; left: 42%;" data-cluster="technology">
              <div class="skill-dot">ğŸ”—</div>
              <span class="skill-label">Agent Patterns</span>
            </div>
            <div class="skill-node frontier" style="top: 72%; left: 55%;" data-cluster="technology">
              <div class="skill-dot">âš›ï¸</div>
              <span class="skill-label">Quantum Comp.</span>
            </div>

            <!-- Business skills -->
            <div class="skill-node mastered" style="top: 62%; left: 30%;" data-cluster="business">
              <div class="skill-dot">ğŸ“ˆ</div>
              <span class="skill-label">Growth Strategy</span>
            </div>
            <div class="skill-node learning" style="top: 68%; left: 22%;" data-cluster="business">
              <div class="skill-dot">ğŸ¯</div>
              <span class="skill-label">GTM Planning</span>
            </div>
            <div class="skill-node frontier" style="top: 60%; left: 24%;" data-cluster="business">
              <div class="skill-dot">ğŸ¤</div>
              <span class="skill-label">M&A Analysis</span>
            </div>

            <!-- Science skills -->
            <div class="skill-node mastered" style="top: 32%; left: 30%;" data-cluster="science">
              <div class="skill-dot">ğŸ§ª</div>
              <span class="skill-label">Biochemistry</span>
            </div>
            <div class="skill-node learning" style="top: 38%; left: 22%;" data-cluster="science">
              <div class="skill-dot">âš›ï¸</div>
              <span class="skill-label">Particle Physics</span>
            </div>
            <div class="skill-node frontier" style="top: 30%; left: 24%;" data-cluster="science">
              <div class="skill-dot">ğŸŒŒ</div>
              <span class="skill-label">Cosmology</span>
            </div>
            <div class="skill-node discovered" style="top: 40%; left: 28%;" data-cluster="science">
              <div class="skill-dot">ğŸ”®</div>
              <span class="skill-label">Complexity Theory</span>
            </div>
            <div class="skill-node learning" style="top: 34%; left: 34%;" data-cluster="science">
              <div class="skill-dot">ğŸ§ </div>
              <span class="skill-label">Cognitive Science</span>
            </div>
          </div>

        </div>
      </div>

      <!-- Legend -->
      <div class="legend">
        <div class="legend-item">
          <span class="legend-dot mastered"></span>
          <span>Mastered</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot learning"></span>
          <span>Learning</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot frontier"></span>
          <span>Frontier</span>
        </div>
        <div class="legend-item">
          <span class="legend-dot discovered"></span>
          <span>AI Discovered</span>
        </div>
      </div>

      <!-- Detail Panel -->
      <div class="detail-panel" id="detail-panel">
        <div class="detail-header">
          <span class="detail-icon" id="detail-icon">ğŸ’¹</span>
          <div>
            <div class="detail-title" id="detail-title">OPTIONS TRADING</div>
            <div class="detail-subtitle" id="detail-subtitle">Finance / Derivatives</div>
          </div>
        </div>
        <div class="detail-stats">
          <div class="detail-stat">
            <span class="detail-stat-label">Mastery</span>
            <span class="detail-stat-value" id="detail-mastery">Advanced</span>
          </div>
          <div class="detail-stat">
            <span class="detail-stat-label">Time Invested</span>
            <span class="detail-stat-value" id="detail-time">280h</span>
          </div>
          <div class="detail-stat">
            <span class="detail-stat-label">Last Active</span>
            <span class="detail-stat-value" id="detail-active">Yesterday</span>
          </div>
          <div class="detail-stat">
            <span class="detail-stat-label">Applications</span>
            <span class="detail-stat-value" id="detail-apps">12</span>
          </div>
        </div>
        <div class="detail-connections" id="detail-connections">
          <strong>Connects to:</strong> DCF Analysis, Fixed Income, Factor Investing
        </div>
      </div>

      <!-- Minimap -->
      <div class="minimap">
        <div class="minimap-content">
          <div class="minimap-dot active" style="top: 50%; left: 50%;"></div>
          <div class="minimap-dot" style="top: 22%; left: 50%;"></div>
          <div class="minimap-dot" style="top: 35%; left: 74%;"></div>
          <div class="minimap-dot" style="top: 65%; left: 74%;"></div>
          <div class="minimap-dot" style="top: 78%; left: 50%;"></div>
          <div class="minimap-dot" style="top: 65%; left: 26%;"></div>
          <div class="minimap-dot" style="top: 35%; left: 26%;"></div>
          <div class="minimap-viewport" style="top: 25%; left: 25%; width: 50%; height: 50%;"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INTERACTION LOGIC
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    var treeContainer = document.getElementById('tree-container');
    var breadcrumb = document.getElementById('breadcrumb');
    var zoomLevelEl = document.getElementById('zoom-level');
    var detailPanel = document.getElementById('detail-panel');
    var skillsLayer = document.getElementById('skills-layer');
    var viewport = document.querySelector('.viewport');

    // Transform state
    var scale = 0.8;
    var panX = 0;
    var panY = 0;

    // Pan state
    var isPanning = false;
    var startX = 0;
    var startY = 0;
    var startPanX = 0;
    var startPanY = 0;

    var currentCluster = null;

    var MIN_SCALE = 0.4;
    var MAX_SCALE = 3.0;
    var ZOOM_SENSITIVITY = 0.002;

    // Skill data for detail panel
    var skillData = {
      'Options Trading': { icon: 'ğŸ’¹', category: 'Finance / Derivatives', mastery: 'Advanced', time: '280h', active: 'Yesterday', apps: 12, connects: 'DCF Analysis, Fixed Income, Factor Investing' },
      'DCF Analysis': { icon: 'ğŸ“Š', category: 'Finance / Valuation', mastery: 'Expert', time: '340h', active: 'Today', apps: 24, connects: 'Options Trading, Fixed Income, M&A Analysis' },
      'Fixed Income': { icon: 'ğŸ¦', category: 'Finance / Bonds', mastery: 'Intermediate', time: '85h', active: '3 days ago', apps: 6, connects: 'DCF Analysis, Macro Trading' },
      'Factor Investing': { icon: 'âš¡', category: 'Finance / Quant', mastery: 'Learning', time: '42h', active: 'Today', apps: 3, connects: 'Options Trading, Growth Strategy' },
      'Macro Trading': { icon: 'ğŸŒ', category: 'Finance / Global', mastery: 'Frontier', time: '12h', active: 'Last week', apps: 1, connects: 'Fixed Income, Cosmology' },
      'Neuroscience': { icon: 'ğŸ§ ', category: 'Health / Brain', mastery: 'Advanced', time: '420h', active: 'Today', apps: 18, connects: 'Cognitive Science, Pharmacology, Circadian Biology' },
      'Pharmacology': { icon: 'ğŸ’Š', category: 'Health / Medicine', mastery: 'Intermediate', time: '156h', active: '2 days ago', apps: 8, connects: 'Neuroscience, Biochemistry, Gene Therapy' },
      'Gene Therapy': { icon: 'ğŸ§¬', category: 'Health / Biotech', mastery: 'Frontier', time: '28h', active: 'Last week', apps: 2, connects: 'Pharmacology, Biochemistry' },
      'Circadian Biology': { icon: 'ğŸ”„', category: 'Health / Chronobiology', mastery: 'Learning', time: '64h', active: 'Yesterday', apps: 5, connects: 'Neuroscience, Complexity Theory' },
      'Music Theory': { icon: 'ğŸ¹', category: 'Creative / Music', mastery: 'Advanced', time: '890h', active: 'Today', apps: 32, connects: 'Photography, Cognitive Science' },
      'Photography': { icon: 'ğŸ“·', category: 'Creative / Visual', mastery: 'Intermediate', time: '210h', active: '4 days ago', apps: 15, connects: 'Music Theory, Screenwriting' },
      'Screenwriting': { icon: 'âœï¸', category: 'Creative / Writing', mastery: 'Frontier', time: '45h', active: 'Last month', apps: 2, connects: 'Photography, Growth Strategy' },
      'Rust': { icon: 'ğŸ¦€', category: 'Technology / Systems', mastery: 'Expert', time: '1,240h', active: 'Today', apps: 42, connects: 'Python, Agent Patterns, Quantum Comp.' },
      'Python': { icon: 'ğŸ', category: 'Technology / General', mastery: 'Expert', time: '2,100h', active: 'Today', apps: 86, connects: 'Rust, LLM Fine-tuning, Biochemistry' },
      'LLM Fine-tuning': { icon: 'ğŸ¤–', category: 'Technology / AI', mastery: 'Intermediate', time: '180h', active: 'Yesterday', apps: 12, connects: 'Python, Agent Patterns, Cognitive Science' },
      'Agent Patterns': { icon: 'ğŸ”—', category: 'Technology / AI', mastery: 'Learning', time: '95h', active: 'Today', apps: 8, connects: 'Rust, LLM Fine-tuning, Complexity Theory' },
      'Quantum Comp.': { icon: 'âš›ï¸', category: 'Technology / Computing', mastery: 'Frontier', time: '32h', active: 'Last week', apps: 1, connects: 'Rust, Particle Physics, Cosmology' },
      'Growth Strategy': { icon: 'ğŸ“ˆ', category: 'Business / Strategy', mastery: 'Advanced', time: '520h', active: 'Today', apps: 28, connects: 'GTM Planning, M&A Analysis, Factor Investing' },
      'GTM Planning': { icon: 'ğŸ¯', category: 'Business / Marketing', mastery: 'Intermediate', time: '145h', active: '2 days ago', apps: 11, connects: 'Growth Strategy, M&A Analysis' },
      'M&A Analysis': { icon: 'ğŸ¤', category: 'Business / Finance', mastery: 'Frontier', time: '38h', active: 'Last month', apps: 3, connects: 'Growth Strategy, DCF Analysis' },
      'Biochemistry': { icon: 'ğŸ§ª', category: 'Science / Chemistry', mastery: 'Advanced', time: '680h', active: 'Yesterday', apps: 22, connects: 'Pharmacology, Gene Therapy, Python' },
      'Particle Physics': { icon: 'âš›ï¸', category: 'Science / Physics', mastery: 'Intermediate', time: '240h', active: '5 days ago', apps: 6, connects: 'Quantum Comp., Cosmology' },
      'Cosmology': { icon: 'ğŸŒŒ', category: 'Science / Astronomy', mastery: 'Frontier', time: '78h', active: 'Last week', apps: 4, connects: 'Particle Physics, Macro Trading, Complexity Theory' },
      'Complexity Theory': { icon: 'ğŸ”®', category: 'Science / Systems', mastery: 'Learning', time: '112h', active: 'Today', apps: 9, connects: 'Circadian Biology, Agent Patterns, Cosmology' },
      'Cognitive Science': { icon: 'ğŸ§ ', category: 'Science / Mind', mastery: 'Intermediate', time: '195h', active: 'Yesterday', apps: 14, connects: 'Neuroscience, LLM Fine-tuning, Music Theory' }
    };

    // Apply transform
    function applyTransform() {
      treeContainer.style.transform = 'translate(' + panX + 'px, ' + panY + 'px) scale(' + scale + ')';
    }

    // Update zoom display
    function updateZoomDisplay() {
      zoomLevelEl.textContent = Math.round(scale * 100) + '%';
    }

    // Update breadcrumb using safe DOM methods
    function updateBreadcrumb(path) {
      while (breadcrumb.firstChild) {
        breadcrumb.removeChild(breadcrumb.firstChild);
      }

      path.forEach(function(item, i) {
        if (i > 0) {
          var sep = document.createElement('span');
          sep.className = 'breadcrumb-sep';
          sep.textContent = 'â€º';
          breadcrumb.appendChild(sep);
        }

        var crumb = document.createElement('span');
        crumb.className = 'breadcrumb-item' + (i === path.length - 1 ? ' active' : '');
        crumb.dataset.level = item.level;
        crumb.textContent = item.label;

        if (i < path.length - 1) {
          crumb.addEventListener('click', function() {
            var level = this.dataset.level;
            if (level === 'root') {
              zoomToOverview();
            }
          });
        }

        breadcrumb.appendChild(crumb);
      });
    }

    // Zoom to overview (animated)
    function zoomToOverview() {
      currentCluster = null;
      treeContainer.classList.add('animating');
      scale = 0.8;
      panX = 0;
      panY = 0;
      applyTransform();
      updateZoomDisplay();
      updateBreadcrumb([{ level: 'root', label: 'All Knowledge' }]);
      skillsLayer.classList.remove('visible');
      treeContainer.dataset.zoom = 'overview';

      setTimeout(function() {
        treeContainer.classList.remove('animating');
      }, 400);
    }

    // Zoom to cluster (animated)
    function zoomToCluster(clusterName, clusterEl) {
      currentCluster = clusterName;
      treeContainer.classList.add('animating');

      // Get cluster position and zoom towards it
      var rect = clusterEl.getBoundingClientRect();
      var viewportRect = viewport.getBoundingClientRect();
      var centerX = viewportRect.width / 2;
      var centerY = viewportRect.height / 2;

      scale = 1.5;
      panX = centerX - (rect.left + rect.width / 2 - viewportRect.left);
      panY = centerY - (rect.top + rect.height / 2 - viewportRect.top);

      applyTransform();
      updateZoomDisplay();

      var label = clusterName.charAt(0).toUpperCase() + clusterName.slice(1).replace('-', ' & ');
      updateBreadcrumb([
        { level: 'root', label: 'All Knowledge' },
        { level: 'cluster', label: label }
      ]);

      skillsLayer.classList.add('visible');
      treeContainer.dataset.zoom = 'cluster';

      setTimeout(function() {
        treeContainer.classList.remove('animating');
      }, 400);
    }

    // Zoom towards mouse position
    function zoomAtPoint(mouseX, mouseY, delta) {
      var viewportRect = viewport.getBoundingClientRect();

      // Mouse position relative to viewport
      var mx = mouseX - viewportRect.left;
      var my = mouseY - viewportRect.top;

      // Calculate new scale
      var zoomFactor = 1 - delta * ZOOM_SENSITIVITY;
      var newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, scale * zoomFactor));

      if (newScale === scale) return;

      // Calculate the point in content space before zoom
      var contentX = (mx - viewportRect.width / 2 - panX) / scale;
      var contentY = (my - viewportRect.height / 2 - panY) / scale;

      // Update scale
      scale = newScale;

      // Calculate new pan to keep mouse point fixed
      panX = mx - viewportRect.width / 2 - contentX * scale;
      panY = my - viewportRect.height / 2 - contentY * scale;

      applyTransform();
      updateZoomDisplay();

      // Update visibility based on scale
      if (scale > 1.0) {
        skillsLayer.classList.add('visible');
        treeContainer.dataset.zoom = 'cluster';
      } else {
        skillsLayer.classList.remove('visible');
        treeContainer.dataset.zoom = 'overview';
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // EVENT HANDLERS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // Mouse pan
    viewport.addEventListener('mousedown', function(e) {
      if (e.target.closest('.cluster') || e.target.closest('.skill-node') || e.target.closest('.center-node')) {
        return; // Don't pan when clicking interactive elements
      }
      isPanning = true;
      startX = e.clientX;
      startY = e.clientY;
      startPanX = panX;
      startPanY = panY;
      treeContainer.classList.add('dragging');
    });

    document.addEventListener('mousemove', function(e) {
      if (!isPanning) return;
      var dx = e.clientX - startX;
      var dy = e.clientY - startY;
      panX = startPanX + dx;
      panY = startPanY + dy;
      applyTransform();
    });

    document.addEventListener('mouseup', function() {
      isPanning = false;
      treeContainer.classList.remove('dragging');
    });

    // Scroll wheel zoom at cursor
    viewport.addEventListener('wheel', function(e) {
      e.preventDefault();
      zoomAtPoint(e.clientX, e.clientY, e.deltaY);
    }, { passive: false });

    // Cluster click handlers
    document.querySelectorAll('.cluster').forEach(function(cluster) {
      cluster.addEventListener('click', function(e) {
        e.stopPropagation();
        var clusterName = this.dataset.cluster;
        zoomToCluster(clusterName, this);
      });
    });

    // Center node click - back to overview
    document.getElementById('center-node').addEventListener('click', function(e) {
      e.stopPropagation();
      zoomToOverview();
    });

    // Zoom buttons
    document.getElementById('zoom-in').addEventListener('click', function() {
      var viewportRect = viewport.getBoundingClientRect();
      zoomAtPoint(viewportRect.left + viewportRect.width / 2, viewportRect.top + viewportRect.height / 2, -100);
    });

    document.getElementById('zoom-out').addEventListener('click', function() {
      var viewportRect = viewport.getBoundingClientRect();
      zoomAtPoint(viewportRect.left + viewportRect.width / 2, viewportRect.top + viewportRect.height / 2, 100);
    });

    // Skill node hover - show detail panel with real data
    document.querySelectorAll('.skill-node').forEach(function(node) {
      node.addEventListener('mouseenter', function() {
        var label = this.querySelector('.skill-label').textContent;
        var data = skillData[label];

        if (data) {
          document.getElementById('detail-icon').textContent = data.icon;
          document.getElementById('detail-title').textContent = label.toUpperCase();
          document.getElementById('detail-subtitle').textContent = data.category;
          document.getElementById('detail-mastery').textContent = data.mastery;
          document.getElementById('detail-time').textContent = data.time;
          document.getElementById('detail-active').textContent = data.active;
          document.getElementById('detail-apps').textContent = data.apps;

          // Update connections safely
          var connectionsEl = document.getElementById('detail-connections');
          while (connectionsEl.firstChild) {
            connectionsEl.removeChild(connectionsEl.firstChild);
          }
          var strong = document.createElement('strong');
          strong.textContent = 'Connects to: ';
          connectionsEl.appendChild(strong);
          connectionsEl.appendChild(document.createTextNode(data.connects));
        }

        detailPanel.classList.add('visible');
      });

      node.addEventListener('mouseleave', function() {
        detailPanel.classList.remove('visible');
      });
    });

    // Initial state
    applyTransform();
    updateZoomDisplay();
    updateBreadcrumb([{ level: 'root', label: 'All Knowledge' }]);
  </script>
</body>
</html>
