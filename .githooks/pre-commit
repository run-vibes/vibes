#!/usr/bin/env bash
set -e

echo "Running pre-commit checks..."

# Format check
echo "→ Checking formatting..."
cargo fmt --check

# Clippy
echo "→ Running clippy..."
cargo clippy --all-targets -- -D warnings

# TypeScript type check (if web-ui files changed)
if git diff --cached --name-only | grep -q '^web-ui/'; then
    echo "→ Checking TypeScript..."
    npm run typecheck --workspace=web-ui
fi

echo "✓ Pre-commit checks passed"
